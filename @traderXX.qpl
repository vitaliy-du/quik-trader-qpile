PORTFOLIO_EX Trader XX;

	CLIENTS_LIST ALL_CLIENTS;
	DESCRIPTION TR-XX 2021.0415.1648.47757;
	FIRMS_LIST ALL_FIRMS;
	USE_CASE_SENSITIVE_CONSTANTS;

	PROGRAM
		new_global("_1UKA3K5A8RVI", "C:\XXXXXXXXXXXX\")
		new_global("global_cfg_file_name", "@traderXX.cfg")
		new_global("global_log_file_name", "@traderXX.log")

		func _1UKADKARVI5TAL6I(_1DEYUK4ARV1ITA)
			_1UKACKAR4VIT8ALIY = get_value(_1DEYUK4ARV1ITA, "YEAR")
			_1DCYUK4ARVIT9ALI = get_value(_1DEYUK4ARV1ITA, "MONTH")
			_1DCY4UAKAR = get_value(_1DEYUK4ARV1ITA, "DAY")

			result = _1UKACKAR4VIT8ALIY * 10000 + _1DCYUK4ARVIT9ALI * 100 + _1DCY4UAKAR
		end func

		func _1UKADKARVI5TEALIY(_1DEYUK4ARV1ITA)
			_1DCYUKAR3VFITA = get_value(_1DEYUK4ARV1ITA, "HOUR")
			_1UKACKARVI3T8ALIY = get_value(_1DEYUK4ARV1ITA, "MIN")

			result = _1DCYUKAR3VFITA * 100 + _1UKACKARVI3T8ALIY
		end func

		func _1ARVITDR5VITDALI(_1DEYUK4ARV1ITA)
			_1DCYUKAR3VFITA = get_value(_1DEYUK4ARV1ITA, "HOUR")
			_1UKACKARVI3T8ALIY = get_value(_1DEYUK4ARV1ITA, "MIN")
			_1ARVITCRVI3TAL1IY = get_value(_1DEYUK4ARV1ITA, "SEC")

			result = _1DCYUKAR3VFITA * 10000 + _1UKACKARVI3T8ALIY * 100 + _1ARVITCRVI3TAL1IY
		end func

		func _1UKADK5A5RVI(_1DEYUKAR5VITAL6IY, _1DEY2UFK, _1DEYUK4ARVIT6ALI, _1UKADKCARVIT5ALI, _1DDYUKEAERVI)
			_1UKABKARDVITBALI = _1DDY3UKA3RVI("DEBUG_TRADING")
			if (_1UKABKARDVITBALI == 1)
				result = _1UKADKARVI0TFALIY("DEBUG_BALANCE", _1UKA3K6A2RVI)
				return
			end if

			if (_1DDYUKEAERVI == "FORTS")
				result = _1UKADKAR3VIT8ALIY(_1DEYUKAR5VITAL6IY, _1UKADKCARVIT5ALI)
				return
			end if

			if (_1DDYUKEAERVI == "MICEX")
				result = _1ARVITDRVI2TALIY9(_1DEY2UFK, _1UKADKCARVIT5ALI)
				return
			end if

			result = 0
		end func

		'	Не работает с тиковым интервалом из-за отсутствия функционала в quik.
		func _1UKADKAR4VITEA(_1UKAEKAR0VAI, _1UKADKEARV1ITA)
			if (_1UKAEKAR0VAI == "")
				result = ""
				return
			end if

			_1DBYUKARFVITCA = get_datetime()
			_1UKABKARVIFTAL0IY = get_value(_1DBYUKARFVITCA, "YEAR") + 0
			_1DCY0U1KAR = get_value(_1DBYUKARFVITCA, "MONTH") + 0
			_1UKACK1A7RVI = get_value(_1DBYUKARFVITCA, "DAY") + 0
			_1UKACKAR0VITALBI = get_value(_1DBYUKARFVITCA, "HOUR") + 0
			_1UKACK0A7R = get_value(_1DBYUKARFVITCA, "MIN") + 0

			_1UKACKARVI0TAL2I = 31 * 24 * 60
			_1UKABKFARV3I = create_map()
			for _1DCYUKAR0VAITALI from 0 to _1UKACKARVI0TAL2I
				_1UKABKEARVDITALI = _1UKABKARVIFTAL0IY * 10000 + _1DCY0U1KAR * 100 + _1UKACK1A7RVI
				_1DCYUKAR0VEITA = _1UKACKAR0VITALBI * 10000 + _1UKACK0A7R * 100

				_1ARVITCR2VITAL5I = get_candle_ex(_1UKAEKAR0VAI, _1UKABKEARVDITALI, _1DCYUKAR0VEITA)
				_1UKACK2A8R = get_value(_1ARVITCR2VITAL5I, "COUNT") + 0
				_1DCYUK1ACRVI = get_value(_1ARVITCR2VITAL5I, "LINES") & ""
				_1DCY1UKABR = get_value(_1ARVITCR2VITAL5I, "TIME") & ""

				_1UKACK0A7R = _1UKACK0A7R - 1
				if (_1UKACK0A7R < 0)
					_1UKACK0A7R = 59
					_1UKACKAR0VITALBI = _1UKACKAR0VITALBI - 1
				end if
				if (_1UKACKAR0VITALBI < 0)
					_1UKACKAR0VITALBI = 23
					_1UKACK1A7RVI = _1UKACK1A7RVI - 1
				end if
				if (_1UKACK1A7RVI < 0)
					_1UKACK1A7RVI = 31
					_1DCY0U1KAR = _1DCY0U1KAR - 1
				end if
				if (_1DCY0U1KAR < 0)
					_1DCY0U1KAR = 12
					_1UKABKARVIFTAL0IY = _1UKABKARVIFTAL0IY - 1
				end if

				if ((_1UKACK2A8R <= 0) or (_1DCYUK1ACRVI == ""))
					continue
				end if

				_1UKABKFARV3I = set_value(_1UKABKFARV3I, _1UKABKEARVDITALI & _1DCY1UKABR, "")
				
				_1DCYUKAR0V8I = 0
				for _1ARVITCRVITA0LIY9 from 0 to len(_1UKABKFARV3I) - 1
					_1UKACKAR1VAI = substr(_1UKABKFARV3I, _1ARVITCRVITA0LIY9, 1)
					if (_1UKACKAR1VAI == "")
						_1DCYUKAR0V8I = _1DCYUKAR0V8I + 1
					end if
				end for

				if (_1DCYUKAR0V8I > _1UKADKEARV1ITA)
					result = _1ARVITCR2VITAL5I
					return
				end if
			end for
		end func

		func _1ARVITDRVI4TAL6IY(_1UKAEKAR0VAI, _1UKADKEARV1ITA, _1ARVITER0VIT9ALI, _1UKAEK4ARVFITALI)
			_1UKABKARDVIT1ALIY = _1UKADKAR4VITEA(_1UKAEKAR0VAI, _1UKADKEARV1ITA)
			_1UKABKDA8RVITA = get_value(_1UKABKARDVIT1ALIY, "COUNT") + 0
			_1UKABKARCVDITALI = get_value(_1UKABKARDVIT1ALIY, "LINES") & ""
			if ((_1UKABKDA8RVITA > 0) and (_1UKABKARCVDITALI != ""))
				_1DBYUKCAERVITA = get_collection_item(_1UKABKARCVDITALI, _1ARVITER0VIT9ALI)
				result = get_value(_1DBYUKCAERVITA, _1UKAEK4ARVFITALI) + 0
				return
			end if

			result = ""
		end func

		func _1UKADK4A7RVITA(_1UKAEKAR0VAI, _1UKADKEARV1ITA, _1ARVITER0VIT9ALI)
			_1DBYEU3KAR = _1UKADKAR4VITEA(_1UKAEKAR0VAI, _1UKADKEARV1ITA)
			_1DBYUKAREVIT4A = get_value(_1DBYEU3KAR, "COUNT") + 0
			_1ARVITBRVIDTEALI = get_value(_1DBYEU3KAR, "LINES") & ""
			if ((_1DBYUKAREVIT4A > 0) and (_1ARVITBRVIDTEALI != ""))
				result = get_collection_item(_1ARVITBRVIDTEALI, _1ARVITER0VIT9ALI)
				return
			end if

			result = ""
		end func

		func _1ARVITDR3VITALFI(_1UKADKCARVIT5ALI)
			_1ARVITBRVICT9ALI = get_classes_list()
			for _1DBYUKCARVCI in _1ARVITBRVICT9ALI
				_1DBYUKBARVITDALI = get_class_securities(_1DBYUKCARVCI)
				for _1DBYUKARCVITAL5IY in _1DBYUKBARVITDALI
					_1ARVITBRVITACLIY0 = get_security_info(_1DBYUKCARVCI, _1DBYUKARCVITAL5IY)
					_1ARVITBRVICTAL8IY = get_value(_1ARVITBRVITACLIY0, "LOT_SIZE") + 0
					if (_1UKADKCARVIT5ALI == _1DBYUKARCVITAL5IY) and (_1ARVITBRVICTAL8IY > 0)
						result = _1DBYUKCARVCI
						return
					end if
				end for
			end for

			result = ""
		end func

		func _1UKADKAR3VIT8ALIY(_1DEYUKAR5VITAL6IY, _1UKADKCARVIT5ALI)
			_1DBYUKBA1R = get_number_of("FUTURES_CLIENT_HOLDINGS")
			for _1UKABKAARV7ITALI from 1 to _1DBYUKBA1R
				_1DBYUKARAVITEALI = get_item("FUTURES_CLIENT_HOLDINGS", _1UKABKAARV7ITALI)

				_1DBYBUKA8R = get_value(_1DBYUKARAVITEALI, "TRDACCID")
				_1DBY9UKAERVI = get_value(_1DBYUKARAVITEALI, "SECCODE")

				if ((_1DEYUKAR5VITAL6IY == _1DBYBUKA8R) and (_1UKADKCARVIT5ALI == _1DBY9UKAERVI))
					result = get_value(_1DBYUKARAVITEALI, "TOTAL_NET") + 0
					return
				end if
			end for

			result = 0
		end func

		func _1DDY3UKA3RVI(_1UKADKARFVITALBIY)
			result = get_value(_1D3Y5U9KARVI, _1UKADKARFVITALBIY) + 0
		end func

		func _1UKADKAR2VEITALI(_1UKADKARFVITALBIY)
			result = get_value(_1D3Y5U9KARVI, _1UKADKARFVITALBIY) & ""
		end func

		func _1DDY1UKADRVI(_1UKAEK1ARV9ITA, _1DDYFUKARV3ITA, _1DEY3UKARV8ITA)
			_1DBYUK6AAR = get_file_len(_1UKAEK1ARV9ITA)
			_1DBYUK6A5RVITA = 0
			if (_1DBYUK6AAR < _1DDYFUKARV3ITA)
				result = _1DEY3UKARV8ITA
			else
				_1DBYUK6ADRVI = _1DDYUK6ARV8ITA(trim(read_line(_1UKAEK1ARV9ITA, _1DDYFUKARV3ITA, _1DBYUK6A5RVITA)))
				if (_1DBYUK6A5RVITA != 0)
					result = _1DEY3UKARV8ITA
				else
					result = _1DBYUK6ADRVI
				end if
			end if
		end func

		func _1UKADKAR1VIT6A(_1UKADKARFVITALBIY, _1ARVITDRVIBT1ALIY)
			_1UKABKARVI6T4A = get_value(_1ARVITDRVIBT1ALIY, _1UKADKARFVITALBIY)
			if (_1UKACKARCV6I(_1UKABKARVI6T4A) == 0)
				result = "" & _1UKABKARVI6T4A
			else
				result = 0 + _1UKABKARVI6T4A
			end if
		end func

		func _1UKADKARVI0TFALIY(_1UKADKARFVITALBIY, _1ARVITDRVIBT1ALIY)
			result = 0 + _1UKADKAR1VIT6A(_1UKADKARFVITALBIY, _1ARVITDRVIBT1ALIY)
		end func

		func _1UKADKAR0VIT8A(_1UKADKARFVITALBIY, _1ARVITDRVIBT1ALIY)
			result = "" & _1UKADKAR1VIT6A(_1UKADKARFVITALBIY, _1ARVITDRVIBT1ALIY)
		end func

		func _1ARVITDRVI2TAL4IY(_1UKAEK1ARV9ITA)
			_1UKABK7ARVITEA = create_map()
			_1DBYUK7A4R = get_file_len(_1UKAEK1ARV9ITA)
			_1UKABKARVI7TALIY2 = 0
			for _1ARVITBR7VBITA from 1 to _1DBYUK7A4R
				_1ARVITBRVI7TALIY3 = trim(read_line(_1UKAEK1ARV9ITA, _1ARVITBR7VBITA, _1UKABKARVI7TALIY2))

				if (_1ARVITBRVI7TALIY3 == "")
					continue
				end if

				_1DBYUK8ARVDI = find(_1ARVITBRVI7TALIY3, 0, "#")
				if (_1DBYUK8ARVDI == 0)
					continue
				end if

				_1DBYUK8ARVDI = find(_1ARVITBRVI7TALIY3, 0, "=")
				if (_1DBYUK8ARVDI < 1)
					continue
				end if

				_1ARVITBRVITA8L8I = substr(_1ARVITBRVI7TALIY3, 0, _1DBYUK8ARVDI)
				_1UKABK8ARV3ITA = substr(_1ARVITBRVI7TALIY3, _1DBYUK8ARVDI + 1, len(_1ARVITBRVI7TALIY3) - _1DBYUK8ARVDI - 1)

				if (_1UKACKARCV6I(_1UKABK8ARV3ITA) == 0)
					_1UKABK7ARVITEA = set_value(_1UKABK7ARVITEA, _1ARVITBRVITA8L8I, _1UKABK8ARV3ITA)
				else
					_1UKABK7ARVITEA = set_value(_1UKABK7ARVITEA, _1ARVITBRVITA8L8I, _1UKABK8ARV3ITA + 0)
				end if
			end for

			result = _1UKABK7ARVITEA
		end func

		func _1ARVITDRVI2TALIY9(_1DEY2UFK, _1UKADKCARVIT5ALI)
			_1DBYUKAR9VITCA = get_number_of("DEPO_LIMITS")
			for _1DBYUK9ARV4ITA from 1 to _1DBYUKAR9VITCA
				_1ARVITBRVITA9L7IY = get_item("DEPO_LIMITS", _1DBYUK9ARV4ITA)

				_1DBYUK9ARVITDALIY = get_value(_1ARVITBRVITA9L7IY, "TRDACCID")
				_1ARVITBR9V3ITALI = get_value(_1ARVITBRVITA9L7IY, "LIMIT_KIND") + 0
				_1DBY9UKA2RVI = get_value(_1ARVITBRVITA9L7IY, "SECCODE")

				if ((_1DBYUK9ARVITDALIY == _1DEY2UFK) and (_1DBY9UKA2RVI == _1UKADKCARVIT5ALI) and (_1ARVITBR9V3ITALI >= 0))
					result = get_value(_1ARVITBRVITA9L7IY, "CURRENT_BALANCE") + 0
					return
				end if
			end for
			
			result = 0
		end func

		func _1UKADKAR0VITAL1IY(_1UKADKAR7VITFALI, _1ARVITDRVITAELIY4, _1DDYFUKA6RVI, _1DEYUK4AERVITA)
			if (_1UKADKAR7VITFALI == 0)
				result = _1DEYUK4AERVITA
			else
				if (_1UKADKAR7VITFALI < 0)
					result = _1DDYFUKA6RVI
				else
					result = _1ARVITDRVITAELIY4
				end if
			end if
		end func

		func _1ARVITCRFVITAL3IY(_1UKADKAR7VITFALI, _1UKADKARBVITCA, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			_1UKABKAR2VITDALI = _1UKADKAR7VITFALI & ""

			if ((_1UKABKAR2VITDALI == "") or (_1UKADKARBVITCA == ""))
				result = _1UKAEKAR1VAITA
				return
			end if

			for _1ARVITBRVI2TEA in _1UKADKARBVITCA
				if (_1ARVITBRVI2TEA == _1UKABKAR2VITDALI)
					result = _1UKADK8ADRVI
					return
				end if
			end for

			result = _1UKAEKAR1VAITA
		end func

		func _1DCYFUKA2RVI(_1UKADKAR7VITFALI, _1DEY2UKA3RVITA, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			if (_1UKADKAR7VITFALI < _1DEY2UKA3RVITA)
				result = _1UKADK8ADRVI
			else
				result = _1UKAEKAR1VAITA
			end if
		end func

		func _1UKACKEARVCITA(_1UKADKAR7VITFALI, _1DEY2UKA3RVITA, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			if (_1UKADKAR7VITFALI > _1DEY2UKA3RVITA)
				result = _1UKADK8ADRVI
			else
				result = _1UKAEKAR1VAITA
			end if
		end func

		func _1ARVITCRFVITAALIY(_1UKADKAR7VITFALI, _1DEY2UKA3RVITA, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			if (_1UKADKAR7VITFALI == _1DEY2UKA3RVITA)
				result = _1UKADK8ADRVI
			else
				result = _1UKAEKAR1VAITA
			end if
		end func

		func _1DCYUKEARVFITALI(_1UKADKAR7VITFALI, _1ARVITDRVIDTALDIY, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			_1UKABK2ARVIT4ALI = _1UKADKAR7VITFALI & ""

			if ((_1UKABK2ARVIT4ALI == "") or (_1ARVITDRVIDTALDIY == ""))
				result = _1UKAEKAR1VAITA
				return
			end if

			for _1UKABKAR2VITAL6IY in _1UKABK2ARVIT4ALI
				_1ARVITBRVI2TALIY5 = find(_1ARVITDRVIDTALDIY, 0, _1UKABKAR2VITAL6IY)
				if (_1ARVITBRVI2TALIY5 == -1)
					result = _1UKAEKAR1VAITA
					return
				end if
			end for

			result = _1UKADK8ADRVI
		end func

		func _1UKACKEA3RVI(_1UKADKAR7VITFALI, _1UKADK8ADRVI, _1UKAEKAR1VAITA)
			if (_1UKADKAR7VITFALI != 0)
				result = _1UKADK8ADRVI
			else
				result = _1UKAEKAR1VAITA
			end if
		end func

		func _1ARVITCRVIDTALAI(_1DEYUK4ARV1ITA)
			_1ARVITBRVI4T3A = _1UKADKARVI5TEALIY(_1DEYUK4ARV1ITA)
			_1DBYUKAR3VITCALI = _1UKADKAR2VEITALI("TRADE_SESSIONS")
			_1DBYUKAR3VITAL5IY = get_value(_1DEYUK4ARV1ITA, "DAYOFWEEK") + 0

			if (_1DBYUKAR3VITCALI == "")
				result = 1
			end if

			for _1ARVITBR5VITAL8IY in _1DBYUKAR3VITCALI
				if (len(_1ARVITBR5VITAL8IY) != 11)
					continue
				end if

				_1DBYUK6ARV1I = substr(_1ARVITBR5VITAL8IY, 0, 1) + 0
				_1DBYUKAR5V5I = substr(_1ARVITBR5VITAL8IY, 2, 4) + 0
				_1DBY4UKACR = substr(_1ARVITBR5VITAL8IY, 7, 4) + 0

				if (((_1DBYUK6ARV1I == 0) or (_1DBYUK6ARV1I == _1DBYUKAR3VITAL5IY)) and (_1DBYUKAR5V5I <= _1ARVITBRVI4T3A) and (_1ARVITBRVI4T3A <= _1DBY4UKACR))
					result = 1
					return
				end if
			end for

			result = 0
		end func

		func _1ARVITCRVIDT9ALI(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if (_1UKADKAR7V6ITA == _1DDYUK7ARV1ITALI)
				result = 1
			else
				result = 0
			end if
		end func

		func _1DCYDUKA6R(_1UKADKAR7VITFALI, _1UKADKARBVITCA)
			_1UKABKAR2VITDALI = _1UKADKAR7VITFALI & ""

			if ((_1UKABKAR2VITDALI == "") or (_1UKADKARBVITCA == ""))
				result = 0
				return
			end if

			for _1ARVITBRVI2TEA in _1UKADKARBVITCA
				if (_1ARVITBRVI2TEA == _1UKABKAR2VITDALI)
					result = 1
					return
				end if
			end for

			result = 0
		end func

		func _1UKACKARCVITALFIY(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if (_1UKADKAR7V6ITA < _1DDYUK7ARV1ITALI)
				result = 1
			else
				result = 0
			end if
		end func

		func _1UKACKARCVEI(_1UKADKAR7VITFALI, _1ARVITDRVIDTALDIY)
			_1UKABK2ARVIT4ALI = _1UKADKAR7VITFALI & ""

			if ((_1UKABK2ARVIT4ALI == "") or (_1ARVITDRVIDTALDIY == ""))
				result = 0
				return
			end if

			for _1UKABKAR2VITAL6IY in _1UKABK2ARVIT4ALI
				_1ARVITBRVI2TALIY5 = find(_1ARVITDRVIDTALDIY, 0, _1UKABKAR2VITAL6IY)
				if (_1ARVITBRVI2TALIY5 == -1)
					result = 0
					return
				end if
			end for

			result = 1
		end func

		func _1DCYUKARCVDITA(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if (_1UKADKAR7V6ITA > _1DDYUK7ARV1ITALI)
				result = 1
			else
				result = 0
			end if
		end func

		func _1UKACKARCV6I(_1UKADKAR7VITFALI)
			_1DBYUKAR0VBI = _1UKADKAR7VITFALI & ""

			if (_1DBYUKAR0VBI == "")
				result = 0
				return
			else
				result = 1
			end if

			_1DBYUK0ARVITCALI = "0123456789."
			for _1DBY0UKARVDITA from 0 to len(_1DBYUKAR0VBI) - 1
				_1DBY1UFK = substr(_1DBYUKAR0VBI, _1DBY0UKARVDITA, 1)
				_1DBY1UKA6RVI = find(_1DBYUK0ARVITCALI, 0, _1DBY1UFK)
				if (_1DBY1UKA6RVI == -1)
					result = 0
					return
				end if
			end for
		end func

		func _1DCYUKCA1R(_1DEYUK4ARV1ITA)
			_1UKAAK9ARV8ITA = get_value(_1DEYUK4ARV1ITA, "SEC") + 0
			if (_1UKAAK9ARV8ITA <= 9)
				_1UKAAK9ARV8ITA = "0" & _1UKAAK9ARV8ITA
			end if
			_1DAY9UKA3RVITA = _1UKADKAR2VEITALI("TRADE_OPEN_SEC")
			if (_1DAY9UKA3RVITA == "")
				result = 1
			else
				result = _1DCYDUKA6R(_1UKAAK9ARV8ITA, _1DAY9UKA3RVITA)
			end if
		end func

		func _1UKACKBARVITAA(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if ((_1UKADKAR7V6ITA == 0) and (_1DDYUK7ARV1ITALI == 0))
				result = 1
			else
				result = 0
			end if
		end func

		func _1ARVITCRBV1ITA(_1UKAEKAR4VBITALI)
			Write(_1D3YUK4ARVFITA, _1UKAEKAR4VBITALI)
		end func

		func _1DCYAUKARV8ITA()
			WriteLn(_1D3YUK4ARVFITA, get_value(get_datetime(), "DATETIME") & ": ")
		end func

		func _1UKACKAARVIT2ALIY()
			WriteLn(_1D3YUK4ARVFITA, "")
		end func

		func _1DCY9UDKAR(_1ARVITDREVITALBIY)
			WriteLn(_1D3YUK4ARVFITA, "    " & _1ARVITDREVITALBIY)
		end func

		func _1DCYAUKA5R(_1ARVITDREVITALBIY)
			WriteLn(_1D3YUK4ARVFITA, get_value(get_datetime(), "DATETIME") & ": " & _1ARVITDREVITALBIY)
		end func

		func _1DCYUKAR9VITALAI(_1UKADKAR7VITFALI)
			if (_1UKADKAR7VITFALI >= 0)
				result = _1UKADKAR7VITFALI
			else
				result = -_1UKADKAR7VITFALI
			end if
		end func

		func _1DCY9UKARV9ITALI(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if ((_1UKADKAR7V6ITA == 0) and (_1DDYUK7ARV1ITALI == 0))
				result = 0
				return
			end if
			if ((_1UKADKAR7V6ITA == 0) and (_1DDYUK7ARV1ITALI == 1))
				result = 0
				return
			end if
			if ((_1UKADKAR7V6ITA == 1) and (_1DDYUK7ARV1ITALI == 0))
				result = 0
				return
			end if
			if ((_1UKADKAR7V6ITA == 1) and (_1DDYUK7ARV1ITALI == 1))
				result = 1
				return
			end if
		end func

		func _1DCYUKAR9VIT4A(_1UKADKAR7VITFALI, _1ARVITERVI0TALIYB, _1UKADKARVI9T6ALIY)
			if (((_1ARVITERVI0TALIYB <= _1UKADKAR7VITFALI) and (_1UKADKAR7VITFALI <= _1UKADKARVI9T6ALIY)) or ((_1ARVITERVI0TALIYB >= _1UKADKAR7VITFALI) and (_1UKADKAR7VITFALI >= _1UKADKARVI9T6ALIY)))
				result = 1
			else
				result = 0
			end if
		end func

		func _1UKACKAR9VIT3A(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if _1UKADKAR7V6ITA > _1DDYUK7ARV1ITALI
				result = _1UKADKAR7V6ITA
			else
				result = _1DDYUK7ARV1ITALI
			end if
		end func

		func _1DCY8UKACRVITA(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if _1UKADKAR7V6ITA < _1DDYUK7ARV1ITALI
				result = _1UKADKAR7V6ITA
			else
				result = _1DDYUK7ARV1ITALI
			end if
		end func

		func _1UKACK8A3RVI(_1UKADKAR7V6ITA, _1DDYUK7ARV1ITALI)
			if ((_1UKADKAR7V6ITA == 0) and (_1DDYUK7ARV1ITALI == 0))
				result = 0
				return
			end if
			if ((_1UKADKAR7V6ITA == 0) and (_1DDYUK7ARV1ITALI == 1))
				result = 1
				return
			end if
			if ((_1UKADKAR7V6ITA == 1) and (_1DDYUK7ARV1ITALI == 0))
				result = 1
				return
			end if
			if ((_1UKADKAR7V6ITA == 1) and (_1DDYUK7ARV1ITALI == 1))
				result = 1
				return
			end if
		end func

		func _1ARVITCRVI7TALAIY(_1UKADKAR7VITFALI, _1ARVITERVI0TALIYB, _1UKADKARVI9T6ALIY)
			if (((_1ARVITERVI0TALIYB <= _1UKADKAR7VITFALI) and (_1UKADKAR7VITFALI <= _1UKADKARVI9T6ALIY)) or ((_1ARVITERVI0TALIYB >= _1UKADKAR7VITFALI) and (_1UKADKAR7VITFALI >= _1UKADKARVI9T6ALIY)))
				result = 0
			else
				result = 1
			end if
		end func

		func _1UKACK7ARV1I(_1UKADKAR7VITFALI, _1ARVITERVI0TALIYB, _1UKADKARVI9T6ALIY, _1DDYUK8A6R)
			if (_1DDYUK8A6R == "INNER")
				result = _1DCYUKAR9VIT4A(_1UKADKAR7VITFALI, _1ARVITERVI0TALIYB, _1UKADKARVI9T6ALIY)
				return
			end if

			if (_1DDYUK8A6R == "OUTER")
				result = _1ARVITCRVI7TALAIY(_1UKADKAR7VITFALI, _1ARVITERVI0TALIYB, _1UKADKARVI9T6ALIY)
				return
			end if
		end func

		func _1UKACKAR6VAI(_1UKADKAR7VITFALI)
			if (_1UKADKAR7VITFALI < 0)
				result = ceil(_1UKADKAR7VITFALI)
			else
				result = floor(_1UKADKAR7VITFALI)
			end if
		end func

		func _1DCY6U9KAR(_1UKADKAR7VITFALI)
			if (_1UKADKAR6V3I(_1UKADKAR7VITFALI) = "")
				result = "--:--:--"
				return
			end if

			_1UKAAKFARV9I = _1UKACKAR6VAI(_1UKADKAR7VITFALI / 10000)
			_1DAYFU6K = _1UKACKAR6VAI((_1UKADKAR7VITFALI - (_1UKAAKFARV9I * 10000)) / 100)
			_1DAYUKAREVITALFIY = _1UKACKAR6VAI((_1UKADKAR7VITFALI - (_1UKAAKFARV9I * 10000) - (_1DAYFU6K * 100)))

			_1DBYUK0ARV2ITA = ""
			_1DBYUK0ARV2ITA = _1DBYUK0ARV2ITA & _1DCYFUKA2RVI(_1UKAAKFARV9I, 10, "0" & _1UKAAKFARV9I, _1UKAAKFARV9I) & ":"
			_1DBYUK0ARV2ITA = _1DBYUK0ARV2ITA & _1DCYFUKA2RVI(_1DAYFU6K, 10, "0" & _1DAYFU6K, _1DAYFU6K) & ":"
			_1DBYUK0ARV2ITA = _1DBYUK0ARV2ITA & _1DCYFUKA2RVI(_1DAYUKAREVITALFIY, 10, "0" & _1DAYUKAREVITALFIY, _1DAYUKAREVITALFIY)

			result = _1DBYUK0ARV2ITA
		end func

		func _1DCYUKAR5VBITA(_1UKAEKAR0VITAL0IY)
			delete_all_items()
			_1DAYCUKA2RVITA = create_map()

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("STATE", _1UKAEKAR0VITAL0IY)
			_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVITABLIYB, "", "-", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Состояние")
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Состояние работы робота")
			add_item(0, _1DAYCUKA2RVITA)

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("BALANCE_VALUE", _1UKAEKAR0VITAL0IY)
			_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVITABLIYB, "", "-", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Лотов")
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Количество лотов")
			add_item(0, _1DAYCUKA2RVITA)

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("CLASS_CODE", _1UKAEKAR0VITAL0IY)
			_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVITABLIYB, "", "-", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Класс")
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Код класса")
			add_item(0, _1DAYCUKA2RVITA)

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("SECURITY_CODE", _1UKAEKAR0VITAL0IY)
			_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVITABLIYB, "", "-", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Бумага")
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
			_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Код бумаги")
			add_item(0, _1DAYCUKA2RVITA)

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("STOP_LOSS", _1UKAEKAR0VITAL0IY)
			if (_1ARVITARVITABLIYB != "")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Стоп лосс")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Стоп лосс")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1ARVITARVITABLIYB = _1UKADKAR0VIT8A("STOP_PROFIT", _1UKAEKAR0VITAL0IY)
			if (_1ARVITARVITABLIYB != "")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "Стоп профит")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Стоп профит")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G1_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G1_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G1_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G1_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G1_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G1_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "1:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '1'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "1:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '1'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "1:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '1'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "1:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '1'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G2_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G2_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G2_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G2_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G2_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G2_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "2:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '2'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "2:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '2'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "2:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '2'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "2:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '2'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G3_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G3_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G3_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G3_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G3_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G3_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "3:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '3'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "3:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '3'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "3:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '3'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "3:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '3'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G4_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G4_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G4_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G4_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G4_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G4_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "4:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '4'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "4:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '4'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "4:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '4'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "4:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '4'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G5_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G5_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G5_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G5_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G5_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G5_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "5:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '5'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "5:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '5'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "5:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '5'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "5:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '5'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G6_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G6_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G6_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G6_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G6_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G6_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "6:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '6'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "6:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '6'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "6:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '6'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "6:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '6'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G7_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G7_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G7_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G7_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G7_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G7_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "7:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '7'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "7:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '7'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "7:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '7'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "7:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '7'")
				add_item(0, _1DAYCUKA2RVITA)
			end if

			_1DAYUKEAAR = _1UKADKAR0VIT8A("G8_DELTA", _1UKAEKAR0VITAL0IY)
			_1UKAAKARDVITAALIY = _1UKADKAR0VIT8A("G8_GREEN_TIME", _1UKAEKAR0VITAL0IY)
			_1DAYUKAREVIT3A = _1UKADKAR0VIT8A("G8_GREEN_VALUE", _1UKAEKAR0VITAL0IY)
			_1DAYUKCARVEITA = _1UKADKAR0VIT8A("G8_RED_TIME", _1UKAEKAR0VITAL0IY)
			_1ARVITARVIDT3A = _1UKADKAR0VIT8A("G8_RED_VALUE", _1UKAEKAR0VITAL0IY)
			_1UKAAKARCV9ITA = _1UKADKAR0VIT8A("G8_SIGNAL", _1UKAEKAR0VITAL0IY)
			if ((_1DAYUKAREVIT3A != "") or (_1ARVITARVIDT3A != ""))
				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKAREVIT3A, "", "-", _1DAYUKAREVIT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "8:Зелёный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на зелёном индикаторе группы '8'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1ARVITARVIDT3A, "", "-", _1ARVITARVIDT3A)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "8:Красный")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Закрытие свечи на красном индикаторе группы '8'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1DAYUKEAAR, "", "-", _1DAYUKEAAR)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "8:Дельта")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Дельта от индикаторов группы '8'")
				add_item(0, _1DAYCUKA2RVITA)

				_1ARVITARVITABLIYB = _1ARVITCRFVITAALIY(_1UKAAKARCV9ITA, "", "-", _1UKAAKARCV9ITA)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "parameter", "8:Сигнал")
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "value", _1ARVITARVITABLIYB)
				_1DAYCUKA2RVITA = set_value(_1DAYCUKA2RVITA, "description", "Сигнал от индикаторов группы '8'")
				add_item(0, _1DAYCUKA2RVITA)
			end if
		end func

		func _1DCY5U4KAR(_1UKADKAR7VITFALI)
			Message(_1UKADKAR7VITFALI, 1)
		end func

		func _1DCYUK6ARV2I(_1DEYUKAR5VITAL6IY, _1DEY2UFK, _1UKADKEA0RVI, _1DDYUKDARVIT6ALIY, _1DDYUKARBV8ITA, _1UKADKDA1RVITA, _1DEYUK4ARVIT6ALI, _1UKADKCARVIT5ALI, _1DDYUKEAERVI, _1UKAEKAR2V8ITA, _1ARVITDR9VITFALI, _1DDYCUEKAR)
			_1UKAAKBARV0ITA = _1DDYUKDARVIT6ALIY + _1DDYUKARBV8ITA
			_1ARVITARVIATAL7I = _1DCYUKAR9VITALAI(_1UKADKDA1RVITA)

			_1DAYUKAARV2I = create_map()
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "TRANS_ID", "1")
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "ACTION", "NEW_ORDER")
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "CLASSCODE", _1DEYUK4ARVIT6ALI)
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "EXECUTION_CONDITION", _1UKAEKAR2V8ITA)
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "SECCODE", _1UKADKCARVIT5ALI)

			if (_1DDYUKEAERVI == "MICEX")
				_1DAYUKAARV2I = set_value (_1DAYUKAARV2I, "ACCOUNT", _1DEY2UFK)
				_1DAYUKAARV2I = set_value (_1DAYUKAARV2I, "CLIENT_CODE", _1DEYUKAR5VITAL6IY)
			end if

			if (_1DDYUKEAERVI == "FORTS")
				_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "ACCOUNT", _1DEYUKAR5VITAL6IY)
				_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "CLIENT_CODE", "")
			end if

			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "OPERATION", _1UKADKEA0RVI)
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "PRICE", _1UKAAKBARV0ITA)
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "QUANTITY", _1ARVITARVIATAL7I)
			_1DAYUKAARV2I = set_value(_1DAYUKAARV2I, "TYPE", "L")

			_1DAYBUKA7R = _1DDY3UKA3RVI("DEBUG_TRADING")
			if (_1DAYBUKA7R == 1)
				_1DAYBUKAARVITA = _1UKADKARVI0TFALIY("DEBUG_BALANCE", _1UKA3K6A2RVI)
				_1DAYBUKAARVITA = _1ARVITCRFVITAALIY(_1UKADKEA0RVI, "B", _1DAYBUKAARVITA + _1ARVITARVIATAL7I, _1DAYBUKAARVITA)
				_1DAYBUKAARVITA = _1ARVITCRFVITAALIY(_1UKADKEA0RVI, "S", _1DAYBUKAARVITA - _1ARVITARVIATAL7I, _1DAYBUKAARVITA)
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "DEBUG_BALANCE", _1DAYBUKAARVITA)

				_1UKAAK9ARVITDA = create_map()
				_1UKAAK9ARVITDA = set_value(_1UKAAK9ARVITDA, "RESULT", 1)
				_1UKAAK9ARVITDA = set_value(_1UKAAK9ARVITDA, "RESULT_EX", 1)
				_1UKAAK9ARVITDA = set_value(_1UKAAK9ARVITDA, "ORDER_NUMBER", 0)
				_1UKAAK9ARVITDA = set_value(_1UKAAK9ARVITDA, "DESCRIPTION", "Debug trade operation")
			else
				_1UKAAK9ARVITDA = send_transaction(_1ARVITDR9VITFALI, _1DAYUKAARV2I)
			end if

			_1UKAAKBARV6ITALI = _1DDY3UKA3RVI("GUARD_ITERATIONS")
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "GUARD_ITERATOR", _1UKAAKBARV6ITALI)

			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Open order on [" & _1UKADKEA0RVI & "]" & " by " & _1DDYCUEKAR )
			_1DCY9UDKAR("Price: " & _1DDYUKDARVIT6ALIY & " ±" & _1DCYUKAR9VITALAI(_1DDYUKARBV8ITA) & " => " & _1UKAAKBARV0ITA)
			_1DCY9UDKAR("Quantity: " & _1ARVITARVIATAL7I)
			_1DCY9UDKAR("Result Code: " & get_value(_1UKAAK9ARVITDA, "RESULT"))
			_1DCY9UDKAR("Status Code: " & get_value(_1UKAAK9ARVITDA, "RESULT_EX"))
			_1DCY9UDKAR("Order Number: " & get_value(_1UKAAK9ARVITDA, "ORDER_NUMBER"))
			_1DCY9UDKAR("Description: " & get_value(_1UKAAK9ARVITDA, "DESCRIPTION"))
			_1DCY9UDKAR("Timeout: " & _1ARVITDR9VITFALI)

			if (_1DDYUKEAERVI == "FORTS")
				_1UKACK5A3RVI("FUTURES_CLIENT_LIMITS", "HISTORY_FUTURES_CLIENT_LIMITS", "History.FuturesClientLimits")
			end if
			if (_1DDYUKEAERVI == "MICEX")
				_1UKACK5A3RVI("MONEY_LIMITS", "HISTORY_MONEY_LIMITS", "History.MoneyLimits")
			end if

			if _1UKADKEA0RVI == "B"
				_1UKAAKARBV1I = "Покупаю"
			end if
			if _1UKADKEA0RVI == "S"
				_1UKAAKARBV1I = "Продаю"
			end if

			_1DCY5U4KAR(_1UKAAKARBV1I & " " & _1UKADKCARVIT5ALI & " на " & _1ARVITARVIATAL7I & " лотов по цене " & _1DDYUKDARVIT6ALIY & " ±" & _1DCYUKAR9VITALAI(_1DDYUKARBV8ITA) & " => " & _1UKAAKBARV0ITA & ". " & get_value(_1UKAAK9ARVITDA, "DESCRIPTION"))

			result = get_value(_1UKAAK9ARVITDA, "RESULT") + 0
		end func

		func _1DDYUK6ARV8ITA(_1UKADKAR7VITFALI)
			result = 0 + _1UKADKAR7VITFALI
		end func

		func _1UKADKAR6V3I(_1UKADKAR7VITFALI)
			result = "" & _1UKADKAR7VITFALI
		end func

		func _1UKACK5A3RVI(_1DDYUKARAV8ITA, _1UKADKBARV9I, _1UKAEK1A4R)
			_1UKAAK8AAR = _1UKADKAR2VEITALI("CHAR_QUOTES")
			_1UKAAKAR7VEI = _1UKADKAR2VEITALI(_1UKADKBARV9I)
			_1ARVITAR6VIT8A = GET_NUMBER_OF(_1DDYUKARAV8ITA)

			if (_1UKAAKAR7VEI == "")
				return
			end if

			_1ARVITAR6VFI = get_value(get_datetime(), "DATETIME")
			for _1DAYUK7A3R from 1 to _1ARVITAR6VIT8A
				_1UKAAKAR6VIT3ALI = get_item(_1DDYUKARAV8ITA, _1DAYUK7A3R)

				_1DAYUKAR7VIT4ALI = get_value(_1UKAAKAR6VIT3ALI, "FIRMID")
				_1DAYUK7ARV9I = _1UKA3K5A8RVI & _1UKAEK1A4R & "." & _1DAYUKAR7VIT4ALI & ".csv"

				_1ARVITARVI7TAL2I = ""
				for _1UKAAKARVI8T7ALIY in _1UKAAKAR7VEI
					_1UKAAKARVI5TALAIY = get_value(_1UKAAKAR6VIT3ALI, _1UKAAKARVI8T7ALIY)
					_1ARVITARVI7TAL2I = _1ARVITARVI7TAL2I & _1UKAAKARVI5TALAIY & ";"
				end for

				WriteLn(_1DAYUK7ARV9I, _1UKAAK8AAR & _1ARVITAR6VFI & _1UKAAK8AAR & ";" & _1ARVITARVI7TAL2I)
			end for
		end func

		new_global("_1ARVIT3RVI4TALIYC", "")
		new_global("_1D3YUK4ARVFITA", "")
		new_global("_1D3Y5U9KARVI", "")
		new_global("_1UKA3K6A2RVI", "")

		_1ARVIT3RVI4TALIYC = _1UKA3K5A8RVI & global_cfg_file_name 
		_1D3YUK4ARVFITA = _1UKA3K5A8RVI & global_log_file_name
		if (_1UKADKAR0VIT8A("IS_STARTED", _1UKA3K6A2RVI) == "")
			_1D3Y5U9KARVI = _1ARVITDRVI2TAL4IY(_1ARVIT3RVI4TALIYC)
		end if

		'
		'	Проверяем, что настройки успешно загружены.
		'
		if (_1D3Y5U9KARVI == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Нет настроек")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		else
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Работаю")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
		end if

		'
		'	Определяем необходимые переменные.
		'

		if (_1UKADKAR0VIT8A("IS_STARTED", _1UKA3K6A2RVI) == "")
			_1UKAAK5ARV1ITA = _1UKADKAR2VEITALI("ACCOUNT_ID")
			_1UKAAK2ARVBITA = ""
			_1ARVIT4RVITA5LIY0 = ""
			_1ARVIT4RVI1TAL0I = _1UKADKAR2VEITALI("SECURITY_CODE")
			_1UKAAKAR2VIT2ALI = _1DDY3UKA3RVI("DEBUG_MODE")
			_1ARVITARVI1TAL9IY = _1UKADKAR2VEITALI("DEPO_ID")
			_1UKA4K4ARV3ITA = _1UKADKAR2VEITALI("MARKET")
			_1D3YUK9ARVIT7ALI = _1UKADKAR2VEITALI("TRADE_CONDITION")
			_1D3YUKAR9V4ITALI = _1DDY3UKA3RVI("TRADE_NEXT_SIGNAL")
			_1D3YAUKA6RVITA = _1DDY3UKA3RVI("TRADE_LOT_FACTOR")
			_1UKA3KARAV1ITALI = _1DDY3UKA3RVI("TRADE_LOT_LIMIT")
			_1UKA3K9ARVITEALI = _1DDY3UKA3RVI("TRADE_LOT_QUANTITY")
			_1D3YUKAR8V8ITA = _1UKADKAR2VEITALI("TRADE_OPERATIONS")
			_1UKA3KARVI8T5A = _1UKADKAR2VEITALI("TRADE_SESSIONS")
			_1D3Y7UKA8RVITA = _1UKADKAR2VEITALI("TRADE_SRC_FIELD")
			_1D3YUKAR7VITAL1I = _1UKADKAR2VEITALI("TRADE_SRC_ID")
			_1UKA3K6ARVIT5ALIY = _1DDY3UKA3RVI("TRADE_TIMEOUT")
		end if

		if (_1UKAAK2ARVBITA == "")
			_1UKAAK2ARVBITA = _1ARVITDR3VITALFI(_1ARVIT4RVI1TAL0I)
		end if

		_1D4Y4UKA7RVI = _1ARVITCRFVITAALIY(_1UKADKAR0VIT8A("IS_STARTED", _1UKA3K6A2RVI), "", 0, 1)
		_1ARVITAR3VIT4ALI = _1UKADK5A5RVI(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA)
		_1UKA4K3A5R = _1UKADKARVI0TFALIY("NEXT_LOT_VALUE", _1UKA3K6A2RVI)
		_1UKA4K3A5R = _1UKACKEARVCITA(_1UKA4K3A5R, 0, _1UKA4K3A5R, _1UKA3K9ARVITEALI)
		_1UKA4K3A5R = _1DCY8UKACRVITA(_1UKA4K3A5R, _1UKACKEARVCITA(_1UKA3KARAV1ITALI, 0, _1UKA3KARAV1ITALI, _1UKA4K3A5R))
		_1UKA4KAR3VITALEIY = _1UKACKAR6VAI(_1UKA4K3A5R)
		_1ARVIT4R2VITAL7IY = get_datetime()
		_1UKA4K2ARVEITALI = _1UKADKARVI5TAL6I(_1ARVIT4R2VITAL7IY)
		_1UKA4KAR2VIT2A = _1UKADKARVI5TEALIY(_1ARVIT4R2VITAL7IY)
		_1UKA4KAR2VIT1A = get_value(_1ARVIT4R2VITAL7IY, "DAYOFWEEK") + 0

		_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "IS_STARTED", 1)

		if (_1D3Y7UKA8RVITA == "LAST")
			_1UKA4K4ARVIT6A = get_param(_1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1D3Y7UKA8RVITA) + 0
		else
			if (_1D3YUKAR7VITAL1I == "")
				_1UKA4KAR5V5ITALI = create_map()
				_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан TRADE_SRC_ID")
				_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
				return
			end if
			_1ARVIT3RVITA6LIYC = _1UKADKAR4VITEA(_1D3YUKAR7VITAL1I, 0)
			_1UKA3K7AFRVI = get_value(_1ARVIT3RVITA6LIYC, "COUNT") + 0
			if (_1UKA3K7AFRVI <= 0)
				_1UKA4KAR5V5ITALI = create_map()
				_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Ошибка получения цены")
				_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
				return
			end if
			_1D3YUK6A6RVI = get_value(_1ARVIT3RVITA6LIYC, "LINES")
			_1UKA3K6A9R = get_collection_item(_1D3YUK6A6RVI, 0)
			_1UKA4K4ARVIT6A = get_value(_1UKA3K6A9R, _1D3Y7UKA8RVITA) + 0
		end if

		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Information of System")
			_1DCY9UDKAR("Is Started: " & _1D4Y4UKA7RVI)
			_1DCY9UDKAR("Class Code: " & _1UKAAK2ARVBITA)
			_1DCY9UDKAR("Security Code: " & _1ARVIT4RVI1TAL0I)
			_1DCY9UDKAR("Market: " & _1UKA4K4ARV3ITA)
			_1DCY9UDKAR("Balance Value: " & _1ARVITAR3VIT4ALI)
			_1DCY9UDKAR("Next Lot Quantity: " & _1UKA4KAR3VITALEIY)
			_1DCY9UDKAR("Next Lot Value: " & _1UKA4K3A5R)
			_1DCY9UDKAR("Trade Lot Factor: " & _1D3YAUKA6RVITA)
			_1DCY9UDKAR("Trade Lot Limit: " & _1UKA3KARAV1ITALI)
			_1DCY9UDKAR("Trade Lot Quantity: " & _1UKA3K9ARVITEALI)
			_1DCY9UDKAR("Trade Operations: " & _1D3YUKAR8V8ITA)
			_1DCY9UDKAR("Trade Sessions: " & _1UKA3KARVI8T5A)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("Last Price: " & _1UKA4K4ARVIT6A)
			_1DCY9UDKAR("Now Date As YYYYMMDD: " & _1UKA4K2ARVEITALI)
			_1DCY9UDKAR("Now Time As HHNN: " & _1UKA4KAR2VIT2A)
			_1DCY9UDKAR("Portfolio Path: " & _1UKA3K5A8RVI)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("Is Connected: " & is_connected())
			_1DCY9UDKAR("Is Alive Session: " & _1ARVITCRVIDTALAI(_1ARVIT4R2VITAL7IY))
			_1DCY9UDKAR("Is Trade Open Sec: " & _1DCYUKCA1R(_1ARVIT4R2VITAL7IY))
		end if

		'
		'	Проверяем значения настроек.
		'
		if (_1UKAAK5ARV1ITA == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан ACCOUNT_ID")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1ARVITARVI1TAL9IY == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан DEPO_ID")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1ARVIT4RVI1TAL0I == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан SECURITY_CODE")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1D3YUK9ARVIT7ALI == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан TRADE_CONDITION")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1D3YUKAR8V8ITA == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан TRADE_OPERATIONS")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if ((_1D3YUKAR8V8ITA != "BS") and (_1D3YUKAR8V8ITA != "B") and (_1D3YUKAR8V8ITA != "S"))
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Ошибка в TRADE_OPERATIONS")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1UKA4K4ARV3ITA == "")
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "CLASS_CODE", _1UKAAK2ARVBITA)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "BALANCE_VALUE", _1ARVITAR3VIT4ALI)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "SECURITY_CODE", _1ARVIT4RVI1TAL0I)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Не указан MARKET")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		if (_1UKA4K4ARVIT6A == 0)
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "CLASS_CODE", _1UKAAK2ARVBITA)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "BALANCE_VALUE", _1ARVITAR3VIT4ALI)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "SECURITY_CODE", _1ARVIT4RVI1TAL0I)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Ожидаю значение цены")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		'
		'	Проверяем, что мы подключены к серверу.
		'
		if (is_connected() == 0)
			_1UKA4KAR5V5ITALI = create_map()
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Нет связи")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		'
		'	Получаем информацию индикаторов.
		'
		_1ARVITARVITA0LIYC = "-"
		_1D9YUKARFVIT9ALI = 0
		_1UKA9KARVIFTAL6IY = _1DDY3UKA3RVI("G1_FORCE_CLOSE")
		_1ARVIT9RVIDTFALIY = _1UKADKAR2VEITALI("G1_GREEN_FIELD")
		_1UKA9KARDVITAL6IY = _1UKADKAR2VEITALI("G1_GREEN_ID")
		_1D9YUKAREVITFALIY = _1DDY3UKA3RVI("G1_CANDLE_OFFSET")
		_1D9YUKARCVITDA = _1DDY3UKA3RVI("G1_GREEN_LINE")
		_1UKA9KBARVITFA = ""
		_1D9YBUKA5RVITA = 0
		_1D9YBUKARV2ITA = _1UKADKAR2VEITALI("G1_INPUT_FILE")
		_1D9YAUKARVDITALI = 1
		_1UKA9KAAARVITA = 1
		_1D9YAUKARV1I = 1
		_1D9YUKAR9VITAL2IY = _1UKADKAR2VEITALI("G1_RED_FIELD")
		_1D9YUKAR8VIT9ALIY = _1UKADKAR2VEITALI("G1_RED_ID")
		_1ARVIT9RVI9TALIY8 = _1DDY3UKA3RVI("G1_CANDLE_OFFSET")
		_1ARVIT9R7VITAL4I = _1DDY3UKA3RVI("G1_RED_LINE")
		_1UKA9KAR6VEITA = ""
		_1UKA9K6ARV6I = 0
		_1ARVIT9R6V5I = "-"
		_1ARVIT9R5VCITALI = _1DDY3UKA3RVI("G1_USE_SIGNAL")
		_1UKA9KAR5VBITALI = _1DDY3UKA3RVI("G1_USE_TIME")
		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Information of '1' Group Indicator")
		end if
		_1ARVITARVI1TAL5IY = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G1_DELTA_FROM"), _1DDY3UKA3RVI("G1_DELTA_TO"))
		_1UKAAK0ARV3I = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G1_DELTA_FROM"), _1DDY3UKA3RVI("G1_DELTA_TO"))
		_1DAYUKAR0V2ITA = _1UKADKAR2VEITALI("G1_DELTA_TYPE")
		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("G1 Delta From: " & _1ARVITARVI1TAL5IY)
			_1DCY9UDKAR("G1 Delta To: " & _1UKAAK0ARV3I)
			_1DCY9UDKAR("G1 Force Close: " & _1UKA9KARVIFTAL6IY)
			_1DCY9UDKAR("G1 Use Signal: " & _1ARVIT9R5VCITALI)
		end if
		_1ARVIT9RVIDTAL3IY = _1UKADKAR4VITEA(_1UKA9KARDVITAL6IY, _1D9YUKAREVITFALIY)
		_1D9YUKEA6RVI = get_value(_1ARVIT9RVIDTAL3IY, "COUNT") + 0
		_1UKA9KARCVEI = ""
		_1ARVIT9RVITACLIY8 = get_value(_1ARVIT9RVIDTAL3IY, "LINES")
		_1UKA9KBARVITFA = _1ARVITCRFVITAALIY(_1UKA9KARDVITAL6IY, "", "", "?")
		_1D9YUKARBVITALAI = _1UKADKARVI0TFALIY("TIME", _1ARVIT9RVIDTAL3IY)
		if (_1D9YUKEA6RVI > 0)
			_1UKA9KARCVEI = get_collection_item(_1ARVIT9RVITACLIY8, _1D9YUKARCVITDA)
			_1D9YBUKA5RVITA = get_value(_1UKA9KARCVEI, _1ARVIT9RVIDTFALIY) + 0
			_1UKA9KBARVITFA = _1D9YBUKA5RVITA & " / " & _1DCY6U9KAR(_1D9YUKARBVITALAI)
		end if
		if (_1D9YBUKARV2ITA != "")
			_1D9YUKARBVITALAI = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
			_1D9YBUKA5RVITA = _1DDY1UKADRVI(_1D9YBUKARV2ITA, 1, 0)
			_1UKA9KBARVITFA = _1D9YBUKA5RVITA & " / " & _1DCY6U9KAR(_1D9YUKARBVITALAI)
		end if
		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("G1 Green Id: " & _1ARVITCRFVITAALIY(_1UKA9KARDVITAL6IY, "", "WARNING! Id is not specified", _1UKA9KARDVITAL6IY))
			_1DCY9UDKAR("G1 Green Candle: " & _1D9YUKAREVITFALIY)
			_1DCY9UDKAR("G1 Green Field: " & _1ARVIT9RVIDTFALIY)
			_1DCY9UDKAR("G1 Green Line Index: " & _1D9YUKARCVITDA)
			_1DCY9UDKAR("G1 Green Time: " & _1ARVITCRFVITAALIY(_1D9YUKARBVITALAI, 0, "WARNING! Time is empty", _1D9YUKARBVITALAI))
			_1DCY9UDKAR("G1 Green Count: " & _1D9YUKEA6RVI)
			_1DCY9UDKAR("G1 Green Value: " & _1D9YBUKA5RVITA)
			_1DCY9UDKAR("G1 Green String: " & _1ARVITCRFVITAALIY(_1UKA9KBARVITFA, "", "WARNING! String is empty", _1UKA9KBARVITFA))
		end if
		_1UKA9KAR8VIT2A = _1UKADKAR4VITEA(_1D9YUKAR8VIT9ALIY, _1ARVIT9RVI9TALIY8)
		_1UKA9KAR9V5ITALI = get_value(_1UKA9KAR8VIT2A, "COUNT") + 0
		_1UKA9KAR7VBITALI = ""
		_1D9Y7UKA3RVI = get_value(_1UKA9KAR8VIT2A, "LINES")
		_1UKA9KAR6VEITA = _1ARVITCRFVITAALIY(_1D9YUKAR8VIT9ALIY, "", "", "?")
		_1UKA9KAR6VIT7A = _1UKADKARVI0TFALIY("TIME", _1UKA9KAR8VIT2A)
		if (_1UKA9KAR9V5ITALI > 0)
			_1UKA9KAR7VBITALI = get_collection_item(_1D9Y7UKA3RVI, _1ARVIT9R7VITAL4I)
			_1UKA9K6ARV6I = get_value(_1UKA9KAR7VBITALI, _1D9YUKAR9VITAL2IY) + 0
			_1UKA9KAR6VEITA = _1UKA9K6ARV6I & " / " & _1DCY6U9KAR(_1UKA9KAR6VIT7A)
		end if
		if (_1D9YBUKARV2ITA != "")
			_1UKA9KAR6VIT7A = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
			_1UKA9K6ARV6I = _1DDY1UKADRVI(_1D9YBUKARV2ITA, 2, 0)
			_1UKA9KAR6VEITA = _1UKA9K6ARV6I & " / " & _1DCY6U9KAR(_1UKA9KAR6VIT7A)
		end if
		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("G1 Red Id: " & _1ARVITCRFVITAALIY(_1D9YUKAR8VIT9ALIY, "", "WARNING! Id is not specified", _1D9YUKAR8VIT9ALIY))
			_1DCY9UDKAR("G1 Red Candle: " & _1ARVIT9RVI9TALIY8)
			_1DCY9UDKAR("G1 Red Field: " & _1D9YUKAR9VITAL2IY)
			_1DCY9UDKAR("G1 Red Line Index: " & _1ARVIT9R7VITAL4I)
			_1DCY9UDKAR("G1 Red Time: " & _1ARVITCRFVITAALIY(_1UKA9KAR6VIT7A, 0, "WARNING! Time is empty", _1UKA9KAR6VIT7A))
			_1DCY9UDKAR("G1 Red Count: " & _1UKA9KAR9V5ITALI)
			_1DCY9UDKAR("G1 Red Value: " & _1UKA9K6ARV6I)
			_1DCY9UDKAR("G1 Red String: " & _1ARVITCRFVITAALIY(_1UKA9KAR6VEITA, "", "WARNING! String is empty", _1UKA9KAR6VEITA))
		end if
		if ((_1UKA9KAR5VBITALI == 1) and ((_1D9YUKARBVITALAI == 0) or (_1UKA9KAR6VIT7A == 0) or (_1D9YUKARBVITALAI != _1UKA9KAR6VIT7A)))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("WARNING! Invalid indicators time.")
			end if

			_1D9YAUKARVDITALI = 0
			_1UKA9KAAARVITA = 0
			_1D9YAUKARV1I = 0
			_1ARVIT9R6V5I = "?"
		else
			_1D9YUKARFVIT9ALI = _1D9YBUKA5RVITA - _1UKA9K6ARV6I
			_1ARVITARVITA0LIYC = _1D9YUKARFVIT9ALI & " / " & _1DAYUKAR0V2ITA & " / " & _1ARVITARVI1TAL5IY & ".." & _1UKAAK0ARV3I
			_1UKA9KAAARVITA = 0
			_1D9YAUKARV1I = _1DCY9UKARV9ITALI(_1D9YAUKARV1I, _1ARVITCRFVITAALIY(_1UKA9KARDVITAL6IY, "", 0, 1))
			_1D9YAUKARV1I = _1DCY9UKARV9ITALI(_1D9YAUKARV1I, _1ARVITCRFVITAALIY(_1D9YUKAR8VIT9ALIY, "", 0, 1))
			_1D9YAUKARV1I = _1DCY9UKARV9ITALI(_1D9YAUKARV1I, _1ARVITCRFVITAALIY(_1UKA9KBARVITFA, "", 0, 1))
			_1D9YAUKARV1I = _1DCY9UKARV9ITALI(_1D9YAUKARV1I, _1ARVITCRFVITAALIY(_1UKA9KAR6VEITA, "", 0, 1))
			_1D9YAUKARVDITALI = _1DCY9UKARV9ITALI(_1D9YAUKARV1I, _1UKACK8A3RVI(_1UKACKBARVITAA(_1ARVITARVI1TAL5IY, _1UKAAK0ARV3I), _1UKACK7ARV1I(_1D9YUKARFVIT9ALI, _1ARVITARVI1TAL5IY, _1UKAAK0ARV3I, _1DAYUKAR0V2ITA)))
			_1ARVIT9R6V5I = "?"
			_1ARVIT9R6V5I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D9YAUKARVDITALI, _1DCYUKARCVDITA(_1D9YBUKA5RVITA, _1UKA9K6ARV6I)), 1, "B", _1ARVIT9R6V5I)
			_1ARVIT9R6V5I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D9YAUKARVDITALI, _1UKACKARCVITALFIY(_1D9YBUKA5RVITA, _1UKA9K6ARV6I)), 1, "S", _1ARVIT9R6V5I)
			_1ARVIT9R6V5I = _1ARVITCRFVITAALIY(_1ARVIT9R5VCITALI, 0, _1DCYUKEARVFITALI(_1ARVIT9R6V5I, "BS", "*", "?"), _1ARVIT9R6V5I)
		end if

		_1UKA9K4AFRVI = "-"
		_1D9YUKAR3VIT6A = 0
		_1UKA9K2ADRVI = _1DDY3UKA3RVI("G2_FORCE_CLOSE")
		_1ARVIT9R1VITALCI = _1UKADKAR2VEITALI("G2_GREEN_FIELD")
		_1UKA9K1ABRVI = _1UKADKAR2VEITALI("G2_GREEN_ID")
		_1ARVIT9R2V8ITA = _1DDY3UKA3RVI("G2_CANDLE_OFFSET")
		_1ARVIT9RVI0TAL2I = _1DDY3UKA3RVI("G2_GREEN_LINE")
		_1ARVIT8RVITAFLIYC = ""
		_1UKA8KFA4R = 0
		_1UKA8KARVIETALIYD = _1UKADKAR2VEITALI("G2_INPUT_FILE")
		_1UKA8KEA8R = 1
		_1D8YUKEA5RVI = 1
		_1UKA8KARDVITEALI = 1
		_1UKA8KARCVITALBIY = _1UKADKAR2VEITALI("G2_RED_FIELD")
		_1D8YCUKARV4I = _1UKADKAR2VEITALI("G2_RED_ID")
		_1D8YUKDARVITDA = _1DDY3UKA3RVI("G2_CANDLE_OFFSET")
		_1UKA8KAARVDITA = _1DDY3UKA3RVI("G2_RED_LINE")
		_1UKA8KAARV5ITALI = ""
		_1D8YAUKA3R = 0
		_1UKA8KARAVIT0A = "-"
		_1D8YUK9ADR = _1DDY3UKA3RVI("G2_USE_SIGNAL")
		_1D8Y9UKA6RVITA = _1DDY3UKA3RVI("G2_USE_TIME")
		if ((_1UKA9K1ABRVI != "") or (_1D8YCUKARV4I != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '2' Group Indicator")
			end if
			_1UKA9KARVI5TAL6I = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G2_DELTA_FROM"), _1DDY3UKA3RVI("G2_DELTA_TO"))
			_1D9YUK4A8RVI = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G2_DELTA_FROM"), _1DDY3UKA3RVI("G2_DELTA_TO"))
			_1ARVIT9R3VITFALI = _1UKADKAR2VEITALI("G2_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G2 Delta From: " & _1UKA9KARVI5TAL6I)
				_1DCY9UDKAR("G2 Delta To: " & _1D9YUK4A8RVI)
				_1DCY9UDKAR("G2 Force Close: " & _1UKA9K2ADRVI)
				_1DCY9UDKAR("G2 Use Signal: " & _1D8YUK9ADR)
			end if
			_1UKA9KAR1VIT4A = _1UKADKAR4VITEA(_1UKA9K1ABRVI, _1ARVIT9R2V8ITA)
			_1D9YUKAR2VIT1A = get_value(_1UKA9KAR1VIT4A, "COUNT") + 0
			_1D9YUK0ARVBI = ""
			_1D9YUK0A1RVITA = get_value(_1UKA9KAR1VIT4A, "LINES")
			_1ARVIT8RVITAFLIYC = _1ARVITCRFVITAALIY(_1UKA9K1ABRVI, "", "", "?")
			_1ARVIT8RFV7ITA = _1UKADKARVI0TFALIY("TIME", _1UKA9KAR1VIT4A)
			if (_1D9YUKAR2VIT1A > 0)
				_1D9YUK0ARVBI = get_collection_item(_1D9YUK0A1RVITA, _1ARVIT9RVI0TAL2I)
				_1UKA8KFA4R = get_value(_1D9YUK0ARVBI, _1ARVIT9R1VITALCI) + 0
				_1ARVIT8RVITAFLIYC = _1UKA8KFA4R & " / " & _1DCY6U9KAR(_1ARVIT8RFV7ITA)
			end if
			if (_1UKA8KARVIETALIYD != "")
				_1ARVIT8RFV7ITA = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA8KFA4R = _1DDY1UKADRVI(_1UKA8KARVIETALIYD, 1, 0)
				_1ARVIT8RVITAFLIYC = _1UKA8KFA4R & " / " & _1DCY6U9KAR(_1ARVIT8RFV7ITA)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G2 Green Id: " & _1ARVITCRFVITAALIY(_1UKA9K1ABRVI, "", "WARNING! Id is not specified", _1UKA9K1ABRVI))
				_1DCY9UDKAR("G2 Green Candle: " & _1ARVIT9R2V8ITA)
				_1DCY9UDKAR("G2 Green Field: " & _1ARVIT9R1VITALCI)
				_1DCY9UDKAR("G2 Green Line Index: " & _1ARVIT9RVI0TAL2I)
				_1DCY9UDKAR("G2 Green Time: " & _1ARVITCRFVITAALIY(_1ARVIT8RFV7ITA, 0, "WARNING! Time is empty", _1ARVIT8RFV7ITA))
				_1DCY9UDKAR("G2 Green Count: " & _1D9YUKAR2VIT1A)
				_1DCY9UDKAR("G2 Green Value: " & _1UKA8KFA4R)
				_1DCY9UDKAR("G2 Green String: " & _1ARVITCRFVITAALIY(_1ARVIT8RVITAFLIYC, "", "WARNING! String is empty", _1ARVIT8RVITAFLIYC))
			end if
			_1D8YBUBK = _1UKADKAR4VITEA(_1D8YCUKARV4I, _1D8YUKDARVITDA)
			_1D8YUKARDVITAL4IY = get_value(_1D8YBUBK, "COUNT") + 0
			_1ARVIT8RVITABL4IY = ""
			_1UKA8KARAVITAA = get_value(_1D8YBUBK, "LINES")
			_1UKA8KAARV5ITALI = _1ARVITCRFVITAALIY(_1D8YCUKARV4I, "", "", "?")
			_1UKA8KAARVIT4A = _1UKADKARVI0TFALIY("TIME", _1D8YBUBK)
			if (_1D8YUKARDVITAL4IY > 0)
				_1ARVIT8RVITABL4IY = get_collection_item(_1UKA8KARAVITAA, _1UKA8KAARVDITA)
				_1D8YAUKA3R = get_value(_1ARVIT8RVITABL4IY, _1UKA8KARCVITALBIY) + 0
				_1UKA8KAARV5ITALI = _1D8YAUKA3R & " / " & _1DCY6U9KAR(_1UKA8KAARVIT4A)
			end if
			if (_1UKA8KARVIETALIYD != "")
				_1UKA8KAARVIT4A = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1D8YAUKA3R = _1DDY1UKADRVI(_1UKA8KARVIETALIYD, 2, 0)
				_1UKA8KAARV5ITALI = _1D8YAUKA3R & " / " & _1DCY6U9KAR(_1UKA8KAARVIT4A)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G2 Red Id: " & _1ARVITCRFVITAALIY(_1D8YCUKARV4I, "", "WARNING! Id is not specified", _1D8YCUKARV4I))
				_1DCY9UDKAR("G2 Red Candle: " & _1D8YUKDARVITDA)
				_1DCY9UDKAR("G2 Red Field: " & _1UKA8KARCVITALBIY)
				_1DCY9UDKAR("G2 Red Line Index: " & _1UKA8KAARVDITA)
				_1DCY9UDKAR("G2 Red Time: " & _1ARVITCRFVITAALIY(_1UKA8KAARVIT4A, 0, "WARNING! Time is empty", _1UKA8KAARVIT4A))
				_1DCY9UDKAR("G2 Red Count: " & _1D8YUKARDVITAL4IY)
				_1DCY9UDKAR("G2 Red Value: " & _1D8YAUKA3R)
				_1DCY9UDKAR("G2 Red String: " & _1ARVITCRFVITAALIY(_1UKA8KAARV5ITALI, "", "WARNING! String is empty", _1UKA8KAARV5ITALI))
			end if
			if ((_1D8Y9UKA6RVITA == 1) and ((_1ARVIT8RFV7ITA == 0) or (_1UKA8KAARVIT4A == 0) or (_1ARVIT8RFV7ITA != _1UKA8KAARVIT4A)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1UKA8KEA8R = 0
				_1D8YUKEA5RVI = 0
				_1UKA8KARDVITEALI = 0
				_1UKA8KARAVIT0A = "?"
			else
				_1D9YUKAR3VIT6A = _1UKA8KFA4R - _1D8YAUKA3R
				_1UKA9K4AFRVI = _1D9YUKAR3VIT6A & " / " & _1ARVIT9R3VITFALI & " / " & _1UKA9KARVI5TAL6I & ".." & _1D9YUK4A8RVI
				_1D8YUKEA5RVI = 0
				_1UKA8KARDVITEALI = _1DCY9UKARV9ITALI(_1UKA8KARDVITEALI, _1ARVITCRFVITAALIY(_1UKA9K1ABRVI, "", 0, 1))
				_1UKA8KARDVITEALI = _1DCY9UKARV9ITALI(_1UKA8KARDVITEALI, _1ARVITCRFVITAALIY(_1D8YCUKARV4I, "", 0, 1))
				_1UKA8KARDVITEALI = _1DCY9UKARV9ITALI(_1UKA8KARDVITEALI, _1ARVITCRFVITAALIY(_1ARVIT8RVITAFLIYC, "", 0, 1))
				_1UKA8KARDVITEALI = _1DCY9UKARV9ITALI(_1UKA8KARDVITEALI, _1ARVITCRFVITAALIY(_1UKA8KAARV5ITALI, "", 0, 1))
				_1UKA8KEA8R = _1DCY9UKARV9ITALI(_1UKA8KARDVITEALI, _1UKACK8A3RVI(_1UKACKBARVITAA(_1UKA9KARVI5TAL6I, _1D9YUK4A8RVI), _1UKACK7ARV1I(_1D9YUKAR3VIT6A, _1UKA9KARVI5TAL6I, _1D9YUK4A8RVI, _1ARVIT9R3VITFALI)))
				_1UKA8KARAVIT0A = "?"
				_1UKA8KARAVIT0A = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKA8KEA8R, _1DCYUKARCVDITA(_1UKA8KFA4R, _1D8YAUKA3R)), 1, "B", _1UKA8KARAVIT0A)
				_1UKA8KARAVIT0A = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKA8KEA8R, _1UKACKARCVITALFIY(_1UKA8KFA4R, _1D8YAUKA3R)), 1, "S", _1UKA8KARAVIT0A)
				_1UKA8KARAVIT0A = _1ARVITCRFVITAALIY(_1D8YUK9ADR, 0, _1DCYUKEARVFITALI(_1UKA8KARAVIT0A, "BS", "*", "?"), _1UKA8KARAVIT0A)
			end if
		end if

		_1UKA8KAR8VITALEIY = "-"
		_1D8Y8U1KARVI = 0
		_1D8YUK7ACRVI = _1DDY3UKA3RVI("G3_FORCE_CLOSE")
		_1ARVIT8RVI7TAL3IY = _1UKADKAR2VEITALI("G3_GREEN_FIELD")
		_1UKA8KAR6VITALEIY = _1UKADKAR2VEITALI("G3_GREEN_ID")
		_1UKA8K7ARV9ITALI = _1DDY3UKA3RVI("G3_CANDLE_OFFSET")
		_1D8YUKAR5V7I = _1DDY3UKA3RVI("G3_GREEN_LINE")
		_1UKA8K4ARVITFALI = ""
		_1UKA8K4ARVIT3A = 0
		_1UKA8KAR4VIT0ALI = _1UKADKAR2VEITALI("G3_INPUT_FILE")
		_1ARVIT8RVI3TAL9IY = 1
		_1D8Y3UKA0RVI = 1
		_1D8YUKAR2VITDALI = 1
		_1D8Y1UKAAR = _1UKADKAR2VEITALI("G3_RED_FIELD")
		_1D8YUK1ARV5I = _1UKADKAR2VEITALI("G3_RED_ID")
		_1D8YUK2A4R = _1DDY3UKA3RVI("G3_CANDLE_OFFSET")
		_1D8YUKAR0V6ITA = _1DDY3UKA3RVI("G3_RED_LINE")
		_1UKA7KFARV8ITA = ""
		_1D7YEUKACRVI = 0
		_1UKA7KARVIETAL7I = "-"
		_1D7YEU6K = _1DDY3UKA3RVI("G3_USE_SIGNAL")
		_1D7YUKARDVFITA = _1DDY3UKA3RVI("G3_USE_TIME")
		if ((_1UKA8KAR6VITALEIY != "") or (_1D8YUK1ARV5I != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '3' Group Indicator")
			end if
			_1ARVIT8R9VITAL3I = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G3_DELTA_FROM"), _1DDY3UKA3RVI("G3_DELTA_TO"))
			_1ARVIT8R8V9ITA = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G3_DELTA_FROM"), _1DDY3UKA3RVI("G3_DELTA_TO"))
			_1UKA8KARVI8T2A = _1UKADKAR2VEITALI("G3_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G3 Delta From: " & _1ARVIT8R9VITAL3I)
				_1DCY9UDKAR("G3 Delta To: " & _1ARVIT8R8V9ITA)
				_1DCY9UDKAR("G3 Force Close: " & _1D8YUK7ACRVI)
				_1DCY9UDKAR("G3 Use Signal: " & _1D7YEU6K)
			end if
			_1UKA8KARVI6T9A = _1UKADKAR4VITEA(_1UKA8KAR6VITALEIY, _1UKA8K7ARV9ITALI)
			_1UKA8KAR7VIT8ALIY = get_value(_1UKA8KARVI6T9A, "COUNT") + 0
			_1UKA8K6A0R = ""
			_1ARVIT8R5V2I = get_value(_1UKA8KARVI6T9A, "LINES")
			_1UKA8K4ARVITFALI = _1ARVITCRFVITAALIY(_1UKA8KAR6VITALEIY, "", "", "?")
			_1ARVIT8RVI4T8ALIY = _1UKADKARVI0TFALIY("TIME", _1UKA8KARVI6T9A)
			if (_1UKA8KAR7VIT8ALIY > 0)
				_1UKA8K6A0R = get_collection_item(_1ARVIT8R5V2I, _1D8YUKAR5V7I)
				_1UKA8K4ARVIT3A = get_value(_1UKA8K6A0R, _1ARVIT8RVI7TAL3IY) + 0
				_1UKA8K4ARVITFALI = _1UKA8K4ARVIT3A & " / " & _1DCY6U9KAR(_1ARVIT8RVI4T8ALIY)
			end if
			if (_1UKA8KAR4VIT0ALI != "")
				_1ARVIT8RVI4T8ALIY = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA8K4ARVIT3A = _1DDY1UKADRVI(_1UKA8KAR4VIT0ALI, 1, 0)
				_1UKA8K4ARVITFALI = _1UKA8K4ARVIT3A & " / " & _1DCY6U9KAR(_1ARVIT8RVI4T8ALIY)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G3 Green Id: " & _1ARVITCRFVITAALIY(_1UKA8KAR6VITALEIY, "", "WARNING! Id is not specified", _1UKA8KAR6VITALEIY))
				_1DCY9UDKAR("G3 Green Candle: " & _1UKA8K7ARV9ITALI)
				_1DCY9UDKAR("G3 Green Field: " & _1ARVIT8RVI7TAL3IY)
				_1DCY9UDKAR("G3 Green Line Index: " & _1D8YUKAR5V7I)
				_1DCY9UDKAR("G3 Green Time: " & _1ARVITCRFVITAALIY(_1ARVIT8RVI4T8ALIY, 0, "WARNING! Time is empty", _1ARVIT8RVI4T8ALIY))
				_1DCY9UDKAR("G3 Green Count: " & _1UKA8KAR7VIT8ALIY)
				_1DCY9UDKAR("G3 Green Value: " & _1UKA8K4ARVIT3A)
				_1DCY9UDKAR("G3 Green String: " & _1ARVITCRFVITAALIY(_1UKA8K4ARVITFALI, "", "WARNING! String is empty", _1UKA8K4ARVITFALI))
			end if
			_1D8Y0UCKAR = _1UKADKAR4VITEA(_1D8YUK1ARV5I, _1D8YUK2A4R)
			_1UKA8K1ADR = get_value(_1D8Y0UCKAR, "COUNT") + 0
			_1ARVIT8R0VITBALI = ""
			_1D7YFUKARVDI = get_value(_1D8Y0UCKAR, "LINES")
			_1UKA7KFARV8ITA = _1ARVITCRFVITAALIY(_1D8YUK1ARV5I, "", "", "?")
			_1UKA7KFA5RVITA = _1UKADKARVI0TFALIY("TIME", _1D8Y0UCKAR)
			if (_1UKA8K1ADR > 0)
				_1ARVIT8R0VITBALI = get_collection_item(_1D7YFUKARVDI, _1D8YUKAR0V6ITA)
				_1D7YEUKACRVI = get_value(_1ARVIT8R0VITBALI, _1D8Y1UKAAR) + 0
				_1UKA7KFARV8ITA = _1D7YEUKACRVI & " / " & _1DCY6U9KAR(_1UKA7KFA5RVITA)
			end if
			if (_1UKA8KAR4VIT0ALI != "")
				_1UKA7KFA5RVITA = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1D7YEUKACRVI = _1DDY1UKADRVI(_1UKA8KAR4VIT0ALI, 2, 0)
				_1UKA7KFARV8ITA = _1D7YEUKACRVI & " / " & _1DCY6U9KAR(_1UKA7KFA5RVITA)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G3 Red Id: " & _1ARVITCRFVITAALIY(_1D8YUK1ARV5I, "", "WARNING! Id is not specified", _1D8YUK1ARV5I))
				_1DCY9UDKAR("G3 Red Candle: " & _1D8YUK2A4R)
				_1DCY9UDKAR("G3 Red Field: " & _1D8Y1UKAAR)
				_1DCY9UDKAR("G3 Red Line Index: " & _1D8YUKAR0V6ITA)
				_1DCY9UDKAR("G3 Red Time: " & _1ARVITCRFVITAALIY(_1UKA7KFA5RVITA, 0, "WARNING! Time is empty", _1UKA7KFA5RVITA))
				_1DCY9UDKAR("G3 Red Count: " & _1UKA8K1ADR)
				_1DCY9UDKAR("G3 Red Value: " & _1D7YEUKACRVI)
				_1DCY9UDKAR("G3 Red String: " & _1ARVITCRFVITAALIY(_1UKA7KFARV8ITA, "", "WARNING! String is empty", _1UKA7KFARV8ITA))
			end if
			if ((_1D7YUKARDVFITA == 1) and ((_1ARVIT8RVI4T8ALIY == 0) or (_1UKA7KFA5RVITA == 0) or (_1ARVIT8RVI4T8ALIY != _1UKA7KFA5RVITA)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1ARVIT8RVI3TAL9IY = 0
				_1D8Y3UKA0RVI = 0
				_1D8YUKAR2VITDALI = 0
				_1UKA7KARVIETAL7I = "?"
			else
				_1D8Y8U1KARVI = _1UKA8K4ARVIT3A - _1D7YEUKACRVI
				_1UKA8KAR8VITALEIY = _1D8Y8U1KARVI & " / " & _1UKA8KARVI8T2A & " / " & _1ARVIT8R9VITAL3I & ".." & _1ARVIT8R8V9ITA
				_1D8Y3UKA0RVI = 0
				_1D8YUKAR2VITDALI = _1DCY9UKARV9ITALI(_1D8YUKAR2VITDALI, _1ARVITCRFVITAALIY(_1UKA8KAR6VITALEIY, "", 0, 1))
				_1D8YUKAR2VITDALI = _1DCY9UKARV9ITALI(_1D8YUKAR2VITDALI, _1ARVITCRFVITAALIY(_1D8YUK1ARV5I, "", 0, 1))
				_1D8YUKAR2VITDALI = _1DCY9UKARV9ITALI(_1D8YUKAR2VITDALI, _1ARVITCRFVITAALIY(_1UKA8K4ARVITFALI, "", 0, 1))
				_1D8YUKAR2VITDALI = _1DCY9UKARV9ITALI(_1D8YUKAR2VITDALI, _1ARVITCRFVITAALIY(_1UKA7KFARV8ITA, "", 0, 1))
				_1ARVIT8RVI3TAL9IY = _1DCY9UKARV9ITALI(_1D8YUKAR2VITDALI, _1UKACK8A3RVI(_1UKACKBARVITAA(_1ARVIT8R9VITAL3I, _1ARVIT8R8V9ITA), _1UKACK7ARV1I(_1D8Y8U1KARVI, _1ARVIT8R9VITAL3I, _1ARVIT8R8V9ITA, _1UKA8KARVI8T2A)))
				_1UKA7KARVIETAL7I = "?"
				_1UKA7KARVIETAL7I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1ARVIT8RVI3TAL9IY, _1DCYUKARCVDITA(_1UKA8K4ARVIT3A, _1D7YEUKACRVI)), 1, "B", _1UKA7KARVIETAL7I)
				_1UKA7KARVIETAL7I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1ARVIT8RVI3TAL9IY, _1UKACKARCVITALFIY(_1UKA8K4ARVIT3A, _1D7YEUKACRVI)), 1, "S", _1UKA7KARVIETAL7I)
				_1UKA7KARVIETAL7I = _1ARVITCRFVITAALIY(_1D7YEU6K, 0, _1DCYUKEARVFITALI(_1UKA7KARVIETAL7I, "BS", "*", "?"), _1UKA7KARVIETAL7I)
			end if
		end if

		_1UKA7KARDVIT5A = "-"
		_1D7YCUKAER = 0
		_1D7YUKCABRVI = _1DDY3UKA3RVI("G4_FORCE_CLOSE")
		_1D7YBUKARV4ITALI = _1UKADKAR2VEITALI("G4_GREEN_FIELD")
		_1UKA7KBA3R = _1UKADKAR2VEITALI("G4_GREEN_ID")
		_1D7YUKCARV4I = _1DDY3UKA3RVI("G4_CANDLE_OFFSET")
		_1UKA7KAR9VITEA = _1DDY3UKA3RVI("G4_GREEN_LINE")
		_1D7Y9U6KAR = ""
		_1D7Y8UKARV8I = 0
		_1ARVIT7RVI8TALIY7 = _1UKADKAR2VEITALI("G4_INPUT_FILE")
		_1D7Y8U4KARVI = 1
		_1UKA7K7ARVDITA = 1
		_1UKA7KAR7VITAL8I = 1
		_1D7YUK6ARVIT9A = _1UKADKAR2VEITALI("G4_RED_FIELD")
		_1UKA7KAR6V6ITALI = _1UKADKAR2VEITALI("G4_RED_ID")
		_1D7YUKAR7VITAL1I = _1DDY3UKA3RVI("G4_CANDLE_OFFSET")
		_1D7Y5U1KAR = _1DDY3UKA3RVI("G4_RED_LINE")
		_1D7YUK4A5RVITA = ""
		_1ARVIT7RVITA4L1IY = 0
		_1D7YUKAR3V8I = "-"
		_1ARVIT7RVITA3L3I = _1DDY3UKA3RVI("G4_USE_SIGNAL")
		_1D7YUK2ARVAI = _1DDY3UKA3RVI("G4_USE_TIME")
		if ((_1UKA7KBA3R != "") or (_1UKA7KAR6V6ITALI != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '4' Group Indicator")
			end if
			_1UKA7KDAARVITA = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G4_DELTA_FROM"), _1DDY3UKA3RVI("G4_DELTA_TO"))
			_1D7YDUKA4R = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G4_DELTA_FROM"), _1DDY3UKA3RVI("G4_DELTA_TO"))
			_1UKA7KARDV1I = _1UKADKAR2VEITALI("G4_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G4 Delta From: " & _1UKA7KDAARVITA)
				_1DCY9UDKAR("G4 Delta To: " & _1D7YDUKA4R)
				_1DCY9UDKAR("G4 Force Close: " & _1D7YUKCABRVI)
				_1DCY9UDKAR("G4 Use Signal: " & _1ARVIT7RVITA3L3I)
			end if
			_1ARVIT7RVIATALAI = _1UKADKAR4VITEA(_1UKA7KBA3R, _1D7YUKCARV4I)
			_1ARVIT7RVIBTALDI = get_value(_1ARVIT7RVIATALAI, "COUNT") + 0
			_1UKA7KAARV1ITALI = ""
			_1UKA7KAR9VDI = get_value(_1ARVIT7RVIATALAI, "LINES")
			_1D7Y9U6KAR = _1ARVITCRFVITAALIY(_1UKA7KBA3R, "", "", "?")
			_1UKA7KAR9V1I = _1UKADKARVI0TFALIY("TIME", _1ARVIT7RVIATALAI)
			if (_1ARVIT7RVIBTALDI > 0)
				_1UKA7KAARV1ITALI = get_collection_item(_1UKA7KAR9VDI, _1UKA7KAR9VITEA)
				_1D7Y8UKARV8I = get_value(_1UKA7KAARV1ITALI, _1D7YBUKARV4ITALI) + 0
				_1D7Y9U6KAR = _1D7Y8UKARV8I & " / " & _1DCY6U9KAR(_1UKA7KAR9V1I)
			end if
			if (_1ARVIT7RVI8TALIY7 != "")
				_1UKA7KAR9V1I = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1D7Y8UKARV8I = _1DDY1UKADRVI(_1ARVIT7RVI8TALIY7, 1, 0)
				_1D7Y9U6KAR = _1D7Y8UKARV8I & " / " & _1DCY6U9KAR(_1UKA7KAR9V1I)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G4 Green Id: " & _1ARVITCRFVITAALIY(_1UKA7KBA3R, "", "WARNING! Id is not specified", _1UKA7KBA3R))
				_1DCY9UDKAR("G4 Green Candle: " & _1D7YUKCARV4I)
				_1DCY9UDKAR("G4 Green Field: " & _1D7YBUKARV4ITALI)
				_1DCY9UDKAR("G4 Green Line Index: " & _1UKA7KAR9VITEA)
				_1DCY9UDKAR("G4 Green Time: " & _1ARVITCRFVITAALIY(_1UKA7KAR9V1I, 0, "WARNING! Time is empty", _1UKA7KAR9V1I))
				_1DCY9UDKAR("G4 Green Count: " & _1ARVIT7RVIBTALDI)
				_1DCY9UDKAR("G4 Green Value: " & _1D7Y8UKARV8I)
				_1DCY9UDKAR("G4 Green String: " & _1ARVITCRFVITAALIY(_1D7Y9U6KAR, "", "WARNING! String is empty", _1D7Y9U6KAR))
			end if
			_1D7Y5UDKAR = _1UKADKAR4VITEA(_1UKA7KAR6V6ITALI, _1D7YUKAR7VITAL1I)
			_1D7YUK6ACRVITA = get_value(_1D7Y5UDKAR, "COUNT") + 0
			_1ARVIT7RVITA5L6I = ""
			_1UKA7KAR4VITCALIY = get_value(_1D7Y5UDKAR, "LINES")
			_1D7YUK4A5RVITA = _1ARVITCRFVITAALIY(_1UKA7KAR6V6ITALI, "", "", "?")
			_1UKA7KAR4VITAL4IY = _1UKADKARVI0TFALIY("TIME", _1D7Y5UDKAR)
			if (_1D7YUK6ACRVITA > 0)
				_1ARVIT7RVITA5L6I = get_collection_item(_1UKA7KAR4VITCALIY, _1D7Y5U1KAR)
				_1ARVIT7RVITA4L1IY = get_value(_1ARVIT7RVITA5L6I, _1D7YUK6ARVIT9A) + 0
				_1D7YUK4A5RVITA = _1ARVIT7RVITA4L1IY & " / " & _1DCY6U9KAR(_1UKA7KAR4VITAL4IY)
			end if
			if (_1ARVIT7RVI8TALIY7 != "")
				_1UKA7KAR4VITAL4IY = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1ARVIT7RVITA4L1IY = _1DDY1UKADRVI(_1ARVIT7RVI8TALIY7, 2, 0)
				_1D7YUK4A5RVITA = _1ARVIT7RVITA4L1IY & " / " & _1DCY6U9KAR(_1UKA7KAR4VITAL4IY)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G4 Red Id: " & _1ARVITCRFVITAALIY(_1UKA7KAR6V6ITALI, "", "WARNING! Id is not specified", _1UKA7KAR6V6ITALI))
				_1DCY9UDKAR("G4 Red Candle: " & _1D7YUKAR7VITAL1I)
				_1DCY9UDKAR("G4 Red Field: " & _1D7YUK6ARVIT9A)
				_1DCY9UDKAR("G4 Red Line Index: " & _1D7Y5U1KAR)
				_1DCY9UDKAR("G4 Red Time: " & _1ARVITCRFVITAALIY(_1UKA7KAR4VITAL4IY, 0, "WARNING! Time is empty", _1UKA7KAR4VITAL4IY))
				_1DCY9UDKAR("G4 Red Count: " & _1D7YUK6ACRVITA)
				_1DCY9UDKAR("G4 Red Value: " & _1ARVIT7RVITA4L1IY)
				_1DCY9UDKAR("G4 Red String: " & _1ARVITCRFVITAALIY(_1D7YUK4A5RVITA, "", "WARNING! String is empty", _1D7YUK4A5RVITA))
			end if
			if ((_1D7YUK2ARVAI == 1) and ((_1UKA7KAR9V1I == 0) or (_1UKA7KAR4VITAL4IY == 0) or (_1UKA7KAR9V1I != _1UKA7KAR4VITAL4IY)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1D7Y8U4KARVI = 0
				_1UKA7K7ARVDITA = 0
				_1UKA7KAR7VITAL8I = 0
				_1D7YUKAR3V8I = "?"
			else
				_1D7YCUKAER = _1D7Y8UKARV8I - _1ARVIT7RVITA4L1IY
				_1UKA7KARDVIT5A = _1D7YCUKAER & " / " & _1UKA7KARDV1I & " / " & _1UKA7KDAARVITA & ".." & _1D7YDUKA4R
				_1UKA7K7ARVDITA = 0
				_1UKA7KAR7VITAL8I = _1DCY9UKARV9ITALI(_1UKA7KAR7VITAL8I, _1ARVITCRFVITAALIY(_1UKA7KBA3R, "", 0, 1))
				_1UKA7KAR7VITAL8I = _1DCY9UKARV9ITALI(_1UKA7KAR7VITAL8I, _1ARVITCRFVITAALIY(_1UKA7KAR6V6ITALI, "", 0, 1))
				_1UKA7KAR7VITAL8I = _1DCY9UKARV9ITALI(_1UKA7KAR7VITAL8I, _1ARVITCRFVITAALIY(_1D7Y9U6KAR, "", 0, 1))
				_1UKA7KAR7VITAL8I = _1DCY9UKARV9ITALI(_1UKA7KAR7VITAL8I, _1ARVITCRFVITAALIY(_1D7YUK4A5RVITA, "", 0, 1))
				_1D7Y8U4KARVI = _1DCY9UKARV9ITALI(_1UKA7KAR7VITAL8I, _1UKACK8A3RVI(_1UKACKBARVITAA(_1UKA7KDAARVITA, _1D7YDUKA4R), _1UKACK7ARV1I(_1D7YCUKAER, _1UKA7KDAARVITA, _1D7YDUKA4R, _1UKA7KARDV1I)))
				_1D7YUKAR3V8I = "?"
				_1D7YUKAR3V8I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D7Y8U4KARVI, _1DCYUKARCVDITA(_1D7Y8UKARV8I, _1ARVIT7RVITA4L1IY)), 1, "B", _1D7YUKAR3V8I)
				_1D7YUKAR3V8I = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D7Y8U4KARVI, _1UKACKARCVITALFIY(_1D7Y8UKARV8I, _1ARVIT7RVITA4L1IY)), 1, "S", _1D7YUKAR3V8I)
				_1D7YUKAR3V8I = _1ARVITCRFVITAALIY(_1ARVIT7RVITA3L3I, 0, _1DCYUKEARVFITALI(_1D7YUKAR3V8I, "BS", "*", "?"), _1D7YUKAR3V8I)
			end if
		end if

		_1ARVIT7R1VITCALI = "-"
		_1UKA7K1ARVIT5A = 0
		_1D7Y1UKA4R = _1DDY3UKA3RVI("G5_FORCE_CLOSE")
		_1ARVIT7RVI0TALIY5 = _1UKADKAR2VEITALI("G5_GREEN_FIELD")
		_1D6YUKFACRVITA = _1UKADKAR2VEITALI("G5_GREEN_ID")
		_1D7Y0UKARVDI = _1DDY3UKA3RVI("G5_CANDLE_OFFSET")
		_1D6YUKEADRVI = _1DDY3UKA3RVI("G5_GREEN_LINE")
		_1UKA6KDARVDITALI = ""
		_1D6YUKDA1RVITA = 0
		_1ARVIT6RVICTALIYA = _1UKADKAR2VEITALI("G5_INPUT_FILE")
		_1D6YCU5KAR = 1
		_1D6YUKARCV0ITALI = 1
		_1ARVIT6RVIBTAL9I = 1
		_1ARVIT6RAVCI = _1UKADKAR2VEITALI("G5_RED_FIELD")
		_1D6YAUKARV5I = _1UKADKAR2VEITALI("G5_RED_ID")
		_1D6YUKBARVIT8ALI = _1DDY3UKA3RVI("G5_CANDLE_OFFSET")
		_1D6Y9UKAERVI = _1DDY3UKA3RVI("G5_RED_LINE")
		_1UKA6KAR9VIT8A = ""
		_1UKA6K8ARVITEALI = 0
		_1D6Y8UKABRVI = "-"
		_1UKA6K8A6RVI = _1DDY3UKA3RVI("G5_USE_SIGNAL")
		_1UKA6K8ARVIT5ALI = _1DDY3UKA3RVI("G5_USE_TIME")
		if ((_1D6YUKFACRVITA != "") or (_1D6YAUKARV5I != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '5' Group Indicator")
			end if
			_1D7YUK2ARV3I = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G5_DELTA_FROM"), _1DDY3UKA3RVI("G5_DELTA_TO"))
			_1D7Y1UKA9R = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G5_DELTA_FROM"), _1DDY3UKA3RVI("G5_DELTA_TO"))
			_1UKA7KARVI1T8A = _1UKADKAR2VEITALI("G5_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G5 Delta From: " & _1D7YUK2ARV3I)
				_1DCY9UDKAR("G5 Delta To: " & _1D7Y1UKA9R)
				_1DCY9UDKAR("G5 Force Close: " & _1D7Y1UKA4R)
				_1DCY9UDKAR("G5 Use Signal: " & _1UKA6K8A6RVI)
			end if
			_1UKA6KARFVIT5ALI = _1UKADKAR4VITEA(_1D6YUKFACRVITA, _1D7Y0UKARVDI)
			_1UKA7KARVI0TAL6I = get_value(_1UKA6KARFVIT5ALI, "COUNT") + 0
			_1ARVIT6RVITAFLIY0 = ""
			_1ARVIT6RVIETAL4I = get_value(_1UKA6KARFVIT5ALI, "LINES")
			_1UKA6KDARVDITALI = _1ARVITCRFVITAALIY(_1D6YUKFACRVITA, "", "", "?")
			_1D6YUKARDVITAL4IY = _1UKADKARVI0TFALIY("TIME", _1UKA6KARFVIT5ALI)
			if (_1UKA7KARVI0TAL6I > 0)
				_1ARVIT6RVITAFLIY0 = get_collection_item(_1ARVIT6RVIETAL4I, _1D6YUKEADRVI)
				_1D6YUKDA1RVITA = get_value(_1ARVIT6RVITAFLIY0, _1ARVIT7RVI0TALIY5) + 0
				_1UKA6KDARVDITALI = _1D6YUKDA1RVITA & " / " & _1DCY6U9KAR(_1D6YUKARDVITAL4IY)
			end if
			if (_1ARVIT6RVICTALIYA != "")
				_1D6YUKARDVITAL4IY = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1D6YUKDA1RVITA = _1DDY1UKADRVI(_1ARVIT6RVICTALIYA, 1, 0)
				_1UKA6KDARVDITALI = _1D6YUKDA1RVITA & " / " & _1DCY6U9KAR(_1D6YUKARDVITAL4IY)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G5 Green Id: " & _1ARVITCRFVITAALIY(_1D6YUKFACRVITA, "", "WARNING! Id is not specified", _1D6YUKFACRVITA))
				_1DCY9UDKAR("G5 Green Candle: " & _1D7Y0UKARVDI)
				_1DCY9UDKAR("G5 Green Field: " & _1ARVIT7RVI0TALIY5)
				_1DCY9UDKAR("G5 Green Line Index: " & _1D6YUKEADRVI)
				_1DCY9UDKAR("G5 Green Time: " & _1ARVITCRFVITAALIY(_1D6YUKARDVITAL4IY, 0, "WARNING! Time is empty", _1D6YUKARDVITAL4IY))
				_1DCY9UDKAR("G5 Green Count: " & _1UKA7KARVI0TAL6I)
				_1DCY9UDKAR("G5 Green Value: " & _1D6YUKDA1RVITA)
				_1DCY9UDKAR("G5 Green String: " & _1ARVITCRFVITAALIY(_1UKA6KDARVDITALI, "", "WARNING! String is empty", _1UKA6KDARVDITALI))
			end if
			_1ARVIT6RVIAT2ALI = _1UKADKAR4VITEA(_1D6YAUKARV5I, _1D6YUKBARVIT8ALI)
			_1UKA6KBA3R = get_value(_1ARVIT6RVIAT2ALI, "COUNT") + 0
			_1UKA6KARVI9TFALI = ""
			_1UKA6KAR9VDITA = get_value(_1ARVIT6RVIAT2ALI, "LINES")
			_1UKA6KAR9VIT8A = _1ARVITCRFVITAALIY(_1D6YAUKARV5I, "", "", "?")
			_1ARVIT6R9V7ITALI = _1UKADKARVI0TFALIY("TIME", _1ARVIT6RVIAT2ALI)
			if (_1UKA6KBA3R > 0)
				_1UKA6KARVI9TFALI = get_collection_item(_1UKA6KAR9VDITA, _1D6Y9UKAERVI)
				_1UKA6K8ARVITEALI = get_value(_1UKA6KARVI9TFALI, _1ARVIT6RAVCI) + 0
				_1UKA6KAR9VIT8A = _1UKA6K8ARVITEALI & " / " & _1DCY6U9KAR(_1ARVIT6R9V7ITALI)
			end if
			if (_1ARVIT6RVICTALIYA != "")
				_1ARVIT6R9V7ITALI = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA6K8ARVITEALI = _1DDY1UKADRVI(_1ARVIT6RVICTALIYA, 2, 0)
				_1UKA6KAR9VIT8A = _1UKA6K8ARVITEALI & " / " & _1DCY6U9KAR(_1ARVIT6R9V7ITALI)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G5 Red Id: " & _1ARVITCRFVITAALIY(_1D6YAUKARV5I, "", "WARNING! Id is not specified", _1D6YAUKARV5I))
				_1DCY9UDKAR("G5 Red Candle: " & _1D6YUKBARVIT8ALI)
				_1DCY9UDKAR("G5 Red Field: " & _1ARVIT6RAVCI)
				_1DCY9UDKAR("G5 Red Line Index: " & _1D6Y9UKAERVI)
				_1DCY9UDKAR("G5 Red Time: " & _1ARVITCRFVITAALIY(_1ARVIT6R9V7ITALI, 0, "WARNING! Time is empty", _1ARVIT6R9V7ITALI))
				_1DCY9UDKAR("G5 Red Count: " & _1UKA6KBA3R)
				_1DCY9UDKAR("G5 Red Value: " & _1UKA6K8ARVITEALI)
				_1DCY9UDKAR("G5 Red String: " & _1ARVITCRFVITAALIY(_1UKA6KAR9VIT8A, "", "WARNING! String is empty", _1UKA6KAR9VIT8A))
			end if
			if ((_1UKA6K8ARVIT5ALI == 1) and ((_1D6YUKARDVITAL4IY == 0) or (_1ARVIT6R9V7ITALI == 0) or (_1D6YUKARDVITAL4IY != _1ARVIT6R9V7ITALI)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1D6YCU5KAR = 0
				_1D6YUKARCV0ITALI = 0
				_1ARVIT6RVIBTAL9I = 0
				_1D6Y8UKABRVI = "?"
			else
				_1UKA7K1ARVIT5A = _1D6YUKDA1RVITA - _1UKA6K8ARVITEALI
				_1ARVIT7R1VITCALI = _1UKA7K1ARVIT5A & " / " & _1UKA7KARVI1T8A & " / " & _1D7YUK2ARV3I & ".." & _1D7Y1UKA9R
				_1D6YUKARCV0ITALI = 0
				_1ARVIT6RVIBTAL9I = _1DCY9UKARV9ITALI(_1ARVIT6RVIBTAL9I, _1ARVITCRFVITAALIY(_1D6YUKFACRVITA, "", 0, 1))
				_1ARVIT6RVIBTAL9I = _1DCY9UKARV9ITALI(_1ARVIT6RVIBTAL9I, _1ARVITCRFVITAALIY(_1D6YAUKARV5I, "", 0, 1))
				_1ARVIT6RVIBTAL9I = _1DCY9UKARV9ITALI(_1ARVIT6RVIBTAL9I, _1ARVITCRFVITAALIY(_1UKA6KDARVDITALI, "", 0, 1))
				_1ARVIT6RVIBTAL9I = _1DCY9UKARV9ITALI(_1ARVIT6RVIBTAL9I, _1ARVITCRFVITAALIY(_1UKA6KAR9VIT8A, "", 0, 1))
				_1D6YCU5KAR = _1DCY9UKARV9ITALI(_1ARVIT6RVIBTAL9I, _1UKACK8A3RVI(_1UKACKBARVITAA(_1D7YUK2ARV3I, _1D7Y1UKA9R), _1UKACK7ARV1I(_1UKA7K1ARVIT5A, _1D7YUK2ARV3I, _1D7Y1UKA9R, _1UKA7KARVI1T8A)))
				_1D6Y8UKABRVI = "?"
				_1D6Y8UKABRVI = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D6YCU5KAR, _1DCYUKARCVDITA(_1D6YUKDA1RVITA, _1UKA6K8ARVITEALI)), 1, "B", _1D6Y8UKABRVI)
				_1D6Y8UKABRVI = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D6YCU5KAR, _1UKACKARCVITALFIY(_1D6YUKDA1RVITA, _1UKA6K8ARVITEALI)), 1, "S", _1D6Y8UKABRVI)
				_1D6Y8UKABRVI = _1ARVITCRFVITAALIY(_1UKA6K8A6RVI, 0, _1DCYUKEARVFITALI(_1D6Y8UKABRVI, "BS", "*", "?"), _1D6Y8UKABRVI)
			end if
		end if

		_1D6YUK7ARVBI = "-"
		_1UKA6KAR6VAI = 0
		_1UKA6K6ARVIT5ALI = _1DDY3UKA3RVI("G6_FORCE_CLOSE")
		_1ARVIT6RVI4TALEIY = _1UKADKAR2VEITALI("G6_GREEN_FIELD")
		_1UKA6K4ARV5ITA = _1UKADKAR2VEITALI("G6_GREEN_ID")
		_1D6YUK5ARVITEA = _1DDY3UKA3RVI("G6_CANDLE_OFFSET")
		_1UKA6K3ARV4ITALI = _1DDY3UKA3RVI("G6_GREEN_LINE")
		_1D6Y2UKA2RVITA = ""
		_1UKA6KAR1VITALEI = 0
		_1D6Y1U9KARVI = _1UKADKAR2VEITALI("G6_INPUT_FILE")
		_1UKA6K1ARV8I = 1
		_1UKA6K1A1RVITA = 1
		_1D6YUK0ARVIT8ALIY = 1
		_1UKA5KARFVIT5ALIY = _1UKADKAR2VEITALI("G6_RED_FIELD")
		_1D5YUKARFV4I = _1UKADKAR2VEITALI("G6_RED_ID")
		_1ARVIT6RVITA0LIY1 = _1DDY3UKA3RVI("G6_CANDLE_OFFSET")
		_1UKA5KAREVIT9ALIY = _1DDY3UKA3RVI("G6_RED_LINE")
		_1D5YUKEARVIT3ALI = ""
		_1UKA5KARDVITAL5IY = 0
		_1D5YUKDA2R = "-"
		_1ARVIT5RCVITALBI = _1DDY3UKA3RVI("G6_USE_SIGNAL")
		_1UKA5KCA4RVI = _1DDY3UKA3RVI("G6_USE_TIME")
		if ((_1UKA6K4ARV5ITA != "") or (_1D5YUKARFV4I != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '6' Group Indicator")
			end if
			_1D6Y7UKACR = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G6_DELTA_FROM"), _1DDY3UKA3RVI("G6_DELTA_TO"))
			_1D6Y7U8K = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G6_DELTA_FROM"), _1DDY3UKA3RVI("G6_DELTA_TO"))
			_1D6Y7UKARV3ITA = _1UKADKAR2VEITALI("G6_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G6 Delta From: " & _1D6Y7UKACR)
				_1DCY9UDKAR("G6 Delta To: " & _1D6Y7U8K)
				_1DCY9UDKAR("G6 Force Close: " & _1UKA6K6ARVIT5ALI)
				_1DCY9UDKAR("G6 Use Signal: " & _1ARVIT5RCVITALBI)
			end if
			_1UKA6KAR3VITCALI = _1UKADKAR4VITEA(_1UKA6K4ARV5ITA, _1D6YUK5ARVITEA)
			_1UKA6KAR5VIT5A = get_value(_1UKA6KAR3VITCALI, "COUNT") + 0
			_1D6YUK3ABRVI = ""
			_1UKA6K2ARVBITA = get_value(_1UKA6KAR3VITCALI, "LINES")
			_1D6Y2UKA2RVITA = _1ARVITCRFVITAALIY(_1UKA6K4ARV5ITA, "", "", "?")
			_1UKA6K2A1RVI = _1UKADKARVI0TFALIY("TIME", _1UKA6KAR3VITCALI)
			if (_1UKA6KAR5VIT5A > 0)
				_1D6YUK3ABRVI = get_collection_item(_1UKA6K2ARVBITA, _1UKA6K3ARV4ITALI)
				_1UKA6KAR1VITALEI = get_value(_1D6YUK3ABRVI, _1ARVIT6RVI4TALEIY) + 0
				_1D6Y2UKA2RVITA = _1UKA6KAR1VITALEI & " / " & _1DCY6U9KAR(_1UKA6K2A1RVI)
			end if
			if (_1D6Y1U9KARVI != "")
				_1UKA6K2A1RVI = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA6KAR1VITALEI = _1DDY1UKADRVI(_1D6Y1U9KARVI, 1, 0)
				_1D6Y2UKA2RVITA = _1UKA6KAR1VITALEI & " / " & _1DCY6U9KAR(_1UKA6K2A1RVI)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G6 Green Id: " & _1ARVITCRFVITAALIY(_1UKA6K4ARV5ITA, "", "WARNING! Id is not specified", _1UKA6K4ARV5ITA))
				_1DCY9UDKAR("G6 Green Candle: " & _1D6YUK5ARVITEA)
				_1DCY9UDKAR("G6 Green Field: " & _1ARVIT6RVI4TALEIY)
				_1DCY9UDKAR("G6 Green Line Index: " & _1UKA6K3ARV4ITALI)
				_1DCY9UDKAR("G6 Green Time: " & _1ARVITCRFVITAALIY(_1UKA6K2A1RVI, 0, "WARNING! Time is empty", _1UKA6K2A1RVI))
				_1DCY9UDKAR("G6 Green Count: " & _1UKA6KAR5VIT5A)
				_1DCY9UDKAR("G6 Green Value: " & _1UKA6KAR1VITALEI)
				_1DCY9UDKAR("G6 Green String: " & _1ARVITCRFVITAALIY(_1D6Y2UKA2RVITA, "", "WARNING! String is empty", _1D6Y2UKA2RVITA))
			end if
			_1UKA5KEARVDITALI = _1UKADKAR4VITEA(_1D5YUKARFV4I, _1ARVIT6RVITA0LIY1)
			_1D5YUKFARVCI = get_value(_1UKA5KEARVDITALI, "COUNT") + 0
			_1D5YUKAREVAI = ""
			_1ARVIT5REVIT4ALI = get_value(_1UKA5KEARVDITALI, "LINES")
			_1D5YUKEARVIT3ALI = _1ARVITCRFVITAALIY(_1D5YUKARFV4I, "", "", "?")
			_1ARVIT5RVIDTALIYC = _1UKADKARVI0TFALIY("TIME", _1UKA5KEARVDITALI)
			if (_1D5YUKFARVCI > 0)
				_1D5YUKAREVAI = get_collection_item(_1ARVIT5REVIT4ALI, _1UKA5KAREVIT9ALIY)
				_1UKA5KARDVITAL5IY = get_value(_1D5YUKAREVAI, _1UKA5KARFVIT5ALIY) + 0
				_1D5YUKEARVIT3ALI = _1UKA5KARDVITAL5IY & " / " & _1DCY6U9KAR(_1ARVIT5RVIDTALIYC)
			end if
			if (_1D6Y1U9KARVI != "")
				_1ARVIT5RVIDTALIYC = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA5KARDVITAL5IY = _1DDY1UKADRVI(_1D6Y1U9KARVI, 2, 0)
				_1D5YUKEARVIT3ALI = _1UKA5KARDVITAL5IY & " / " & _1DCY6U9KAR(_1ARVIT5RVIDTALIYC)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G6 Red Id: " & _1ARVITCRFVITAALIY(_1D5YUKARFV4I, "", "WARNING! Id is not specified", _1D5YUKARFV4I))
				_1DCY9UDKAR("G6 Red Candle: " & _1ARVIT6RVITA0LIY1)
				_1DCY9UDKAR("G6 Red Field: " & _1UKA5KARFVIT5ALIY)
				_1DCY9UDKAR("G6 Red Line Index: " & _1UKA5KAREVIT9ALIY)
				_1DCY9UDKAR("G6 Red Time: " & _1ARVITCRFVITAALIY(_1ARVIT5RVIDTALIYC, 0, "WARNING! Time is empty", _1ARVIT5RVIDTALIYC))
				_1DCY9UDKAR("G6 Red Count: " & _1D5YUKFARVCI)
				_1DCY9UDKAR("G6 Red Value: " & _1UKA5KARDVITAL5IY)
				_1DCY9UDKAR("G6 Red String: " & _1ARVITCRFVITAALIY(_1D5YUKEARVIT3ALI, "", "WARNING! String is empty", _1D5YUKEARVIT3ALI))
			end if
			if ((_1UKA5KCA4RVI == 1) and ((_1UKA6K2A1RVI == 0) or (_1ARVIT5RVIDTALIYC == 0) or (_1UKA6K2A1RVI != _1ARVIT5RVIDTALIYC)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1UKA6K1ARV8I = 0
				_1UKA6K1A1RVITA = 0
				_1D6YUK0ARVIT8ALIY = 0
				_1D5YUKDA2R = "?"
			else
				_1UKA6KAR6VAI = _1UKA6KAR1VITALEI - _1UKA5KARDVITAL5IY
				_1D6YUK7ARVBI = _1UKA6KAR6VAI & " / " & _1D6Y7UKARV3ITA & " / " & _1D6Y7UKACR & ".." & _1D6Y7U8K
				_1UKA6K1A1RVITA = 0
				_1D6YUK0ARVIT8ALIY = _1DCY9UKARV9ITALI(_1D6YUK0ARVIT8ALIY, _1ARVITCRFVITAALIY(_1UKA6K4ARV5ITA, "", 0, 1))
				_1D6YUK0ARVIT8ALIY = _1DCY9UKARV9ITALI(_1D6YUK0ARVIT8ALIY, _1ARVITCRFVITAALIY(_1D5YUKARFV4I, "", 0, 1))
				_1D6YUK0ARVIT8ALIY = _1DCY9UKARV9ITALI(_1D6YUK0ARVIT8ALIY, _1ARVITCRFVITAALIY(_1D6Y2UKA2RVITA, "", 0, 1))
				_1D6YUK0ARVIT8ALIY = _1DCY9UKARV9ITALI(_1D6YUK0ARVIT8ALIY, _1ARVITCRFVITAALIY(_1D5YUKEARVIT3ALI, "", 0, 1))
				_1UKA6K1ARV8I = _1DCY9UKARV9ITALI(_1D6YUK0ARVIT8ALIY, _1UKACK8A3RVI(_1UKACKBARVITAA(_1D6Y7UKACR, _1D6Y7U8K), _1UKACK7ARV1I(_1UKA6KAR6VAI, _1D6Y7UKACR, _1D6Y7U8K, _1D6Y7UKARV3ITA)))
				_1D5YUKDA2R = "?"
				_1D5YUKDA2R = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKA6K1ARV8I, _1DCYUKARCVDITA(_1UKA6KAR1VITALEI, _1UKA5KARDVITAL5IY)), 1, "B", _1D5YUKDA2R)
				_1D5YUKDA2R = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKA6K1ARV8I, _1UKACKARCVITALFIY(_1UKA6KAR1VITALEI, _1UKA5KARDVITAL5IY)), 1, "S", _1D5YUKDA2R)
				_1D5YUKDA2R = _1ARVITCRFVITAALIY(_1ARVIT5RCVITALBI, 0, _1DCYUKEARVFITALI(_1D5YUKDA2R, "BS", "*", "?"), _1D5YUKDA2R)
			end if
		end if

		_1UKA5KBARVAI = "-"
		_1D5YUKAARV7ITA = 0
		_1D5YUKARAV0I = _1DDY3UKA3RVI("G7_FORCE_CLOSE")
		_1D5YUKAR9V3I = _1UKADKAR2VEITALI("G7_GREEN_FIELD")
		_1D5Y9UKARV2ITA = _1UKADKAR2VEITALI("G7_GREEN_ID")
		_1ARVIT5RVI9TALFI = _1DDY3UKA3RVI("G7_CANDLE_OFFSET")
		_1UKA5KARVI7TALIYD = _1DDY3UKA3RVI("G7_GREEN_LINE")
		_1UKA5KAR7V7ITA = ""
		_1D5YUKAR6VITBALI = 0
		_1UKA5K6AARVI = _1UKADKAR2VEITALI("G7_INPUT_FILE")
		_1ARVIT5R6VITAL3IY = 1
		_1D5Y5UKAER = 1
		_1D5YUK5ABRVITA = 1
		_1D5Y5UKA0R = _1UKADKAR2VEITALI("G7_RED_FIELD")
		_1D5YUK4ABRVI = _1UKADKAR2VEITALI("G7_RED_ID")
		_1D5YUKAR5VIT8A = _1DDY3UKA3RVI("G7_CANDLE_OFFSET")
		_1D5YUK4ARV6I = _1DDY3UKA3RVI("G7_RED_LINE")
		_1D5YUKAR3VIT8A = ""
		_1UKA5KARVI3T2ALI = 0
		_1D5Y2UFKAR = "-"
		_1D5YUK2AER = _1DDY3UKA3RVI("G7_USE_SIGNAL")
		_1UKA5K2ARVDI = _1DDY3UKA3RVI("G7_USE_TIME")
		if ((_1D5Y9UKARV2ITA != "") or (_1D5YUK4ABRVI != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '7' Group Indicator")
			end if
			_1D5YBUKADRVI = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G7_DELTA_FROM"), _1DDY3UKA3RVI("G7_DELTA_TO"))
			_1D5YBUKA1RVI = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G7_DELTA_FROM"), _1DDY3UKA3RVI("G7_DELTA_TO"))
			_1UKA5KARBVIT0ALI = _1UKADKAR2VEITALI("G7_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G7 Delta From: " & _1D5YBUKADRVI)
				_1DCY9UDKAR("G7 Delta To: " & _1D5YBUKA1RVI)
				_1DCY9UDKAR("G7 Force Close: " & _1D5YUKARAV0I)
				_1DCY9UDKAR("G7 Use Signal: " & _1D5YUK2AER)
			end if
			_1D5Y8UBK = _1UKADKAR4VITEA(_1D5Y9UKARV2ITA, _1ARVIT5RVI9TALFI)
			_1UKA5K9ARV6ITA = get_value(_1D5Y8UBK, "COUNT") + 0
			_1UKA5KAR8V6I = ""
			_1D5YUKAR7VCITA = get_value(_1D5Y8UBK, "LINES")
			_1UKA5KAR7V7ITA = _1ARVITCRFVITAALIY(_1D5Y9UKARV2ITA, "", "", "?")
			_1D5YUK7A0R = _1UKADKARVI0TFALIY("TIME", _1D5Y8UBK)
			if (_1UKA5K9ARV6ITA > 0)
				_1UKA5KAR8V6I = get_collection_item(_1D5YUKAR7VCITA, _1UKA5KARVI7TALIYD)
				_1D5YUKAR6VITBALI = get_value(_1UKA5KAR8V6I, _1D5YUKAR9V3I) + 0
				_1UKA5KAR7V7ITA = _1D5YUKAR6VITBALI & " / " & _1DCY6U9KAR(_1D5YUK7A0R)
			end if
			if (_1UKA5K6AARVI != "")
				_1D5YUK7A0R = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1D5YUKAR6VITBALI = _1DDY1UKADRVI(_1UKA5K6AARVI, 1, 0)
				_1UKA5KAR7V7ITA = _1D5YUKAR6VITBALI & " / " & _1DCY6U9KAR(_1D5YUK7A0R)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G7 Green Id: " & _1ARVITCRFVITAALIY(_1D5Y9UKARV2ITA, "", "WARNING! Id is not specified", _1D5Y9UKARV2ITA))
				_1DCY9UDKAR("G7 Green Candle: " & _1ARVIT5RVI9TALFI)
				_1DCY9UDKAR("G7 Green Field: " & _1D5YUKAR9V3I)
				_1DCY9UDKAR("G7 Green Line Index: " & _1UKA5KARVI7TALIYD)
				_1DCY9UDKAR("G7 Green Time: " & _1ARVITCRFVITAALIY(_1D5YUK7A0R, 0, "WARNING! Time is empty", _1D5YUK7A0R))
				_1DCY9UDKAR("G7 Green Count: " & _1UKA5K9ARV6ITA)
				_1DCY9UDKAR("G7 Green Value: " & _1D5YUKAR6VITBALI)
				_1DCY9UDKAR("G7 Green String: " & _1ARVITCRFVITAALIY(_1UKA5KAR7V7ITA, "", "WARNING! String is empty", _1UKA5KAR7V7ITA))
			end if
			_1D5YUKAR4VIT8ALI = _1UKADKAR4VITEA(_1D5YUK4ABRVI, _1D5YUKAR5VIT8A)
			_1D5Y5UKA1RVI = get_value(_1D5YUKAR4VIT8ALI, "COUNT") + 0
			_1UKA5K4ARV7ITALI = ""
			_1D5Y4UKARV1I = get_value(_1D5YUKAR4VIT8ALI, "LINES")
			_1D5YUKAR3VIT8A = _1ARVITCRFVITAALIY(_1D5YUK4ABRVI, "", "", "?")
			_1D5Y3U7K = _1UKADKARVI0TFALIY("TIME", _1D5YUKAR4VIT8ALI)
			if (_1D5Y5UKA1RVI > 0)
				_1UKA5K4ARV7ITALI = get_collection_item(_1D5Y4UKARV1I, _1D5YUK4ARV6I)
				_1UKA5KARVI3T2ALI = get_value(_1UKA5K4ARV7ITALI, _1D5Y5UKA0R) + 0
				_1D5YUKAR3VIT8A = _1UKA5KARVI3T2ALI & " / " & _1DCY6U9KAR(_1D5Y3U7K)
			end if
			if (_1UKA5K6AARVI != "")
				_1D5Y3U7K = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA5KARVI3T2ALI = _1DDY1UKADRVI(_1UKA5K6AARVI, 2, 0)
				_1D5YUKAR3VIT8A = _1UKA5KARVI3T2ALI & " / " & _1DCY6U9KAR(_1D5Y3U7K)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G7 Red Id: " & _1ARVITCRFVITAALIY(_1D5YUK4ABRVI, "", "WARNING! Id is not specified", _1D5YUK4ABRVI))
				_1DCY9UDKAR("G7 Red Candle: " & _1D5YUKAR5VIT8A)
				_1DCY9UDKAR("G7 Red Field: " & _1D5Y5UKA0R)
				_1DCY9UDKAR("G7 Red Line Index: " & _1D5YUK4ARV6I)
				_1DCY9UDKAR("G7 Red Time: " & _1ARVITCRFVITAALIY(_1D5Y3U7K, 0, "WARNING! Time is empty", _1D5Y3U7K))
				_1DCY9UDKAR("G7 Red Count: " & _1D5Y5UKA1RVI)
				_1DCY9UDKAR("G7 Red Value: " & _1UKA5KARVI3T2ALI)
				_1DCY9UDKAR("G7 Red String: " & _1ARVITCRFVITAALIY(_1D5YUKAR3VIT8A, "", "WARNING! String is empty", _1D5YUKAR3VIT8A))
			end if
			if ((_1UKA5K2ARVDI == 1) and ((_1D5YUK7A0R == 0) or (_1D5Y3U7K == 0) or (_1D5YUK7A0R != _1D5Y3U7K)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1ARVIT5R6VITAL3IY = 0
				_1D5Y5UKAER = 0
				_1D5YUK5ABRVITA = 0
				_1D5Y2UFKAR = "?"
			else
				_1D5YUKAARV7ITA = _1D5YUKAR6VITBALI - _1UKA5KARVI3T2ALI
				_1UKA5KBARVAI = _1D5YUKAARV7ITA & " / " & _1UKA5KARBVIT0ALI & " / " & _1D5YBUKADRVI & ".." & _1D5YBUKA1RVI
				_1D5Y5UKAER = 0
				_1D5YUK5ABRVITA = _1DCY9UKARV9ITALI(_1D5YUK5ABRVITA, _1ARVITCRFVITAALIY(_1D5Y9UKARV2ITA, "", 0, 1))
				_1D5YUK5ABRVITA = _1DCY9UKARV9ITALI(_1D5YUK5ABRVITA, _1ARVITCRFVITAALIY(_1D5YUK4ABRVI, "", 0, 1))
				_1D5YUK5ABRVITA = _1DCY9UKARV9ITALI(_1D5YUK5ABRVITA, _1ARVITCRFVITAALIY(_1UKA5KAR7V7ITA, "", 0, 1))
				_1D5YUK5ABRVITA = _1DCY9UKARV9ITALI(_1D5YUK5ABRVITA, _1ARVITCRFVITAALIY(_1D5YUKAR3VIT8A, "", 0, 1))
				_1ARVIT5R6VITAL3IY = _1DCY9UKARV9ITALI(_1D5YUK5ABRVITA, _1UKACK8A3RVI(_1UKACKBARVITAA(_1D5YBUKADRVI, _1D5YBUKA1RVI), _1UKACK7ARV1I(_1D5YUKAARV7ITA, _1D5YBUKADRVI, _1D5YBUKA1RVI, _1UKA5KARBVIT0ALI)))
				_1D5Y2UFKAR = "?"
				_1D5Y2UFKAR = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1ARVIT5R6VITAL3IY, _1DCYUKARCVDITA(_1D5YUKAR6VITBALI, _1UKA5KARVI3T2ALI)), 1, "B", _1D5Y2UFKAR)
				_1D5Y2UFKAR = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1ARVIT5R6VITAL3IY, _1UKACKARCVITALFIY(_1D5YUKAR6VITBALI, _1UKA5KARVI3T2ALI)), 1, "S", _1D5Y2UFKAR)
				_1D5Y2UFKAR = _1ARVITCRFVITAALIY(_1D5YUK2AER, 0, _1DCYUKEARVFITALI(_1D5Y2UFKAR, "BS", "*", "?"), _1D5Y2UFKAR)
			end if
		end if

		_1D5YUK2A1R = "-"
		_1D5Y1UKA6R = 0
		_1ARVIT5R0VITFA = _1DDY3UKA3RVI("G8_FORCE_CLOSE")
		_1D4YUKFARVEITA = _1UKADKAR2VEITALI("G8_GREEN_FIELD")
		_1D4YFUKA9R = _1UKADKAR2VEITALI("G8_GREEN_ID")
		_1D5Y0UAKAR = _1DDY3UKA3RVI("G8_CANDLE_OFFSET")
		_1UKA4KARVIFTALIY4 = _1DDY3UKA3RVI("G8_GREEN_LINE")
		_1UKA4KEA2R = ""
		_1UKA4KARDVITAL6I = 0
		_1UKA4KDA1RVI = _1UKADKAR2VEITALI("G8_INPUT_FILE")
		_1D4YUKCARVEITALI = 1
		_1UKA4KCARV7ITA = 1
		_1UKA4KARVICTAL6IY = 1
		_1ARVIT4RVIBTAL7IY = _1UKADKAR2VEITALI("G8_RED_FIELD")
		_1UKA4KARVIBTALIY0 = _1UKADKAR2VEITALI("G8_RED_ID")
		_1ARVIT4RVICTALIY1 = _1DDY3UKA3RVI("G8_CANDLE_OFFSET")
		_1UKA4KARVIATALIY1 = _1DDY3UKA3RVI("G8_RED_LINE")
		_1UKA4KARVI9T1A = ""
		_1ARVIT4R8VITALBIY = 0
		_1UKA4KAR8V8ITA = "-"
		_1D4Y7UFK = _1DDY3UKA3RVI("G8_USE_SIGNAL")
		_1UKA4KAR7V6ITA = _1DDY3UKA3RVI("G8_USE_TIME")
		if ((_1D4YFUKA9R != "") or (_1UKA4KARVIBTALIY0 != ""))
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of '8' Group Indicator")
			end if
			_1UKA5KAR2VITALAIY = _1DCY8UKACRVITA(_1DDY3UKA3RVI("G8_DELTA_FROM"), _1DDY3UKA3RVI("G8_DELTA_TO"))
			_1D5Y1UKAARVI = _1UKACKAR9VIT3A(_1DDY3UKA3RVI("G8_DELTA_FROM"), _1DDY3UKA3RVI("G8_DELTA_TO"))
			_1D5Y1U7KAR = _1UKADKAR2VEITALI("G8_DELTA_TYPE")
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G8 Delta From: " & _1UKA5KAR2VITALAIY)
				_1DCY9UDKAR("G8 Delta To: " & _1D5Y1UKAARVI)
				_1DCY9UDKAR("G8 Force Close: " & _1ARVIT5R0VITFA)
				_1DCY9UDKAR("G8 Use Signal: " & _1D4Y7UFK)
			end if
			_1ARVIT4RVIFTAL8IY = _1UKADKAR4VITEA(_1D4YFUKA9R, _1D5Y0UAKAR)
			_1D5YUK0ARV3I = get_value(_1ARVIT4RVIFTAL8IY, "COUNT") + 0
			_1D4YFUKA5RVI = ""
			_1UKA4KAREVBITA = get_value(_1ARVIT4RVIFTAL8IY, "LINES")
			_1UKA4KEA2R = _1ARVITCRFVITAALIY(_1D4YFUKA9R, "", "", "?")
			_1D4YUKARDVBITALI = _1UKADKARVI0TFALIY("TIME", _1ARVIT4RVIFTAL8IY)
			if (_1D5YUK0ARV3I > 0)
				_1D4YFUKA5RVI = get_collection_item(_1UKA4KAREVBITA, _1UKA4KARVIFTALIY4)
				_1UKA4KARDVITAL6I = get_value(_1D4YFUKA5RVI, _1D4YUKFARVEITA) + 0
				_1UKA4KEA2R = _1UKA4KARDVITAL6I & " / " & _1DCY6U9KAR(_1D4YUKARDVBITALI)
			end if
			if (_1UKA4KDA1RVI != "")
				_1D4YUKARDVBITALI = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1UKA4KARDVITAL6I = _1DDY1UKADRVI(_1UKA4KDA1RVI, 1, 0)
				_1UKA4KEA2R = _1UKA4KARDVITAL6I & " / " & _1DCY6U9KAR(_1D4YUKARDVBITALI)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G8 Green Id: " & _1ARVITCRFVITAALIY(_1D4YFUKA9R, "", "WARNING! Id is not specified", _1D4YFUKA9R))
				_1DCY9UDKAR("G8 Green Candle: " & _1D5Y0UAKAR)
				_1DCY9UDKAR("G8 Green Field: " & _1D4YUKFARVEITA)
				_1DCY9UDKAR("G8 Green Line Index: " & _1UKA4KARVIFTALIY4)
				_1DCY9UDKAR("G8 Green Time: " & _1ARVITCRFVITAALIY(_1D4YUKARDVBITALI, 0, "WARNING! Time is empty", _1D4YUKARDVBITALI))
				_1DCY9UDKAR("G8 Green Count: " & _1D5YUK0ARV3I)
				_1DCY9UDKAR("G8 Green Value: " & _1UKA4KARDVITAL6I)
				_1DCY9UDKAR("G8 Green String: " & _1ARVITCRFVITAALIY(_1UKA4KEA2R, "", "WARNING! String is empty", _1UKA4KEA2R))
			end if
			_1ARVIT4RAVITALDIY = _1UKADKAR4VITEA(_1UKA4KARVIBTALIY0, _1ARVIT4RVICTALIY1)
			_1UKA4KARBVIT8A = get_value(_1ARVIT4RAVITALDIY, "COUNT") + 0
			_1UKA4KAARV8ITA = ""
			_1D4Y9UAKAR = get_value(_1ARVIT4RAVITALDIY, "LINES")
			_1UKA4KARVI9T1A = _1ARVITCRFVITAALIY(_1UKA4KARVIBTALIY0, "", "", "?")
			_1ARVIT4RVI8TALCI = _1UKADKARVI0TFALIY("TIME", _1ARVIT4RAVITALDIY)
			if (_1UKA4KARBVIT8A > 0)
				_1UKA4KAARV8ITA = get_collection_item(_1D4Y9UAKAR, _1UKA4KARVIATALIY1)
				_1ARVIT4R8VITALBIY = get_value(_1UKA4KAARV8ITA, _1ARVIT4RVIBTAL7IY) + 0
				_1UKA4KARVI9T1A = _1ARVIT4R8VITALBIY & " / " & _1DCY6U9KAR(_1ARVIT4RVI8TALCI)
			end if
			if (_1UKA4KDA1RVI != "")
				_1ARVIT4RVI8TALCI = _1ARVITDR5VITDALI(_1ARVIT4R2VITAL7IY)
				_1ARVIT4R8VITALBIY = _1DDY1UKADRVI(_1UKA4KDA1RVI, 2, 0)
				_1UKA4KARVI9T1A = _1ARVIT4R8VITALBIY & " / " & _1DCY6U9KAR(_1ARVIT4RVI8TALCI)
			end if
			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G8 Red Id: " & _1ARVITCRFVITAALIY(_1UKA4KARVIBTALIY0, "", "WARNING! Id is not specified", _1UKA4KARVIBTALIY0))
				_1DCY9UDKAR("G8 Red Candle: " & _1ARVIT4RVICTALIY1)
				_1DCY9UDKAR("G8 Red Field: " & _1ARVIT4RVIBTAL7IY)
				_1DCY9UDKAR("G8 Red Line Index: " & _1UKA4KARVIATALIY1)
				_1DCY9UDKAR("G8 Red Time: " & _1ARVITCRFVITAALIY(_1ARVIT4RVI8TALCI, 0, "WARNING! Time is empty", _1ARVIT4RVI8TALCI))
				_1DCY9UDKAR("G8 Red Count: " & _1UKA4KARBVIT8A)
				_1DCY9UDKAR("G8 Red Value: " & _1ARVIT4R8VITALBIY)
				_1DCY9UDKAR("G8 Red String: " & _1ARVITCRFVITAALIY(_1UKA4KARVI9T1A, "", "WARNING! String is empty", _1UKA4KARVI9T1A))
			end if
			if ((_1UKA4KAR7V6ITA == 1) and ((_1D4YUKARDVBITALI == 0) or (_1ARVIT4RVI8TALCI == 0) or (_1D4YUKARDVBITALI != _1ARVIT4RVI8TALCI)))
				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("WARNING! Invalid indicators time.")
				end if

				_1D4YUKCARVEITALI = 0
				_1UKA4KCARV7ITA = 0
				_1UKA4KARVICTAL6IY = 0
				_1UKA4KAR8V8ITA = "?"
			else
				_1D5Y1UKA6R = _1UKA4KARDVITAL6I - _1ARVIT4R8VITALBIY
				_1D5YUK2A1R = _1D5Y1UKA6R & " / " & _1D5Y1U7KAR & " / " & _1UKA5KAR2VITALAIY & ".." & _1D5Y1UKAARVI
				_1UKA4KCARV7ITA = 0
				_1UKA4KARVICTAL6IY = _1DCY9UKARV9ITALI(_1UKA4KARVICTAL6IY, _1ARVITCRFVITAALIY(_1D4YFUKA9R, "", 0, 1))
				_1UKA4KARVICTAL6IY = _1DCY9UKARV9ITALI(_1UKA4KARVICTAL6IY, _1ARVITCRFVITAALIY(_1UKA4KARVIBTALIY0, "", 0, 1))
				_1UKA4KARVICTAL6IY = _1DCY9UKARV9ITALI(_1UKA4KARVICTAL6IY, _1ARVITCRFVITAALIY(_1UKA4KEA2R, "", 0, 1))
				_1UKA4KARVICTAL6IY = _1DCY9UKARV9ITALI(_1UKA4KARVICTAL6IY, _1ARVITCRFVITAALIY(_1UKA4KARVI9T1A, "", 0, 1))
				_1D4YUKCARVEITALI = _1DCY9UKARV9ITALI(_1UKA4KARVICTAL6IY, _1UKACK8A3RVI(_1UKACKBARVITAA(_1UKA5KAR2VITALAIY, _1D5Y1UKAARVI), _1UKACK7ARV1I(_1D5Y1UKA6R, _1UKA5KAR2VITALAIY, _1D5Y1UKAARVI, _1D5Y1U7KAR)))
				_1UKA4KAR8V8ITA = "?"
				_1UKA4KAR8V8ITA = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D4YUKCARVEITALI, _1DCYUKARCVDITA(_1UKA4KARDVITAL6I, _1ARVIT4R8VITALBIY)), 1, "B", _1UKA4KAR8V8ITA)
				_1UKA4KAR8V8ITA = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1D4YUKCARVEITALI, _1UKACKARCVITALFIY(_1UKA4KARDVITAL6I, _1ARVIT4R8VITALBIY)), 1, "S", _1UKA4KAR8V8ITA)
				_1UKA4KAR8V8ITA = _1ARVITCRFVITAALIY(_1D4Y7UFK, 0, _1DCYUKEARVFITALI(_1UKA4KAR8V8ITA, "BS", "*", "?"), _1UKA4KAR8V8ITA)
			end if
		end if

		'
		'	Отображаем основную информацию в таблице.
		'
		_1UKA4KAR5V5ITALI = create_map()

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "CLASS_CODE", _1UKAAK2ARVBITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "BALANCE_VALUE", _1ARVITAR3VIT4ALI & " ±" & _1UKA4KAR3VITALEIY & " / " & _1D3YAUKA6RVITA & " / " & _1UKA3K9ARVITEALI & " / " & _1UKA3KARAV1ITALI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "SECURITY_CODE", _1ARVIT4RVI1TAL0I)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_GREEN_ID", _1UKA9KARDVITAL6IY)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_GREEN_VALUE", _1UKA9KBARVITFA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_RED_ID", _1D9YUKAR8VIT9ALIY)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_RED_VALUE", _1UKA9KAR6VEITA)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_GREEN_ID", _1UKA9K1ABRVI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_GREEN_VALUE", _1ARVIT8RVITAFLIYC)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_RED_ID", _1D8YCUKARV4I)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_RED_VALUE", _1UKA8KAARV5ITALI)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_GREEN_ID", _1UKA8KAR6VITALEIY)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_GREEN_VALUE", _1UKA8K4ARVITFALI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_RED_ID", _1D8YUK1ARV5I)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_RED_VALUE", _1UKA7KFARV8ITA)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_GREEN_ID", _1UKA7KBA3R)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_GREEN_VALUE", _1D7Y9U6KAR)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_RED_ID", _1UKA7KAR6V6ITALI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_RED_VALUE", _1D7YUK4A5RVITA)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_GREEN_ID", _1D6YUKFACRVITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_GREEN_VALUE", _1UKA6KDARVDITALI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_RED_ID", _1D6YAUKARV5I)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_RED_VALUE", _1UKA6KAR9VIT8A)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_GREEN_ID", _1UKA6K4ARV5ITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_GREEN_VALUE", _1D6Y2UKA2RVITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_RED_ID", _1D5YUKARFV4I)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_RED_VALUE", _1D5YUKEARVIT3ALI)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_GREEN_ID", _1D5Y9UKARV2ITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_GREEN_VALUE", _1UKA5KAR7V7ITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_RED_ID", _1D5YUK4ABRVI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_RED_VALUE", _1D5YUKAR3VIT8A)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_GREEN_ID", _1D4YFUKA9R)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_GREEN_VALUE", _1UKA4KEA2R)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_RED_ID", _1UKA4KARVIBTALIY0)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_RED_VALUE", _1UKA4KARVI9T1A)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Ожидаю данные")
		_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)

		'
		'	Проверяем, что все заданные группы индикаторов исправно работают.
		'
		_1UKAAK1ARV6I = 1
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1D9YAUKARV1I)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1UKA8KARDVITEALI)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1D8YUKAR2VITDALI)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1UKA7KAR7VITAL8I)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVIT6RVIBTAL9I)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1D6YUK0ARVIT8ALIY)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1D5YUK5ABRVITA)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1UKA4KARVICTAL6IY)
		if (_1UKAAK1ARV6I != 1)
			return
		end if

		'
		'	Отображаем дополнительную информацию в таблице.
		'
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Анализирую")

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_DELTA", _1ARVITARVITA0LIYC)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G1_SIGNAL", _1ARVIT9R6V5I)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_DELTA", _1UKA9K4AFRVI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G2_SIGNAL", _1UKA8KARAVIT0A)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_DELTA", _1UKA8KAR8VITALEIY)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G3_SIGNAL", _1UKA7KARVIETAL7I)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_DELTA", _1UKA7KARDVIT5A)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G4_SIGNAL", _1D7YUKAR3V8I)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_DELTA", _1ARVIT7R1VITCALI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G5_SIGNAL", _1D6Y8UKABRVI)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_DELTA", _1D6YUK7ARVBI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G6_SIGNAL", _1D5YUKDA2R)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_DELTA", _1UKA5KBARVAI)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G7_SIGNAL", _1D5Y2UFKAR)

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_DELTA", _1D5YUK2A1R)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "G8_SIGNAL", _1UKA4KAR8V8ITA)

		_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)

		'
		'	Проверяем, что мы находимся в пределах времени 'рабочей' сессии.
		'
		if (_1ARVITCRVIDTALAI(_1ARVIT4R2VITAL7IY) == 0)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Ожидаю сессию")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		'
		'	Проверяем защитные пороговые значения.
		'
		_1UKA4KAR6V5ITALI = _1UKADKARVI0TFALIY("GUARD_IDLE_DAY", _1UKA3K6A2RVI)
		_1UKA4KARVI5TCALI = _1UKADKARVI0TFALIY("GUARD_ITERATOR", _1UKA3K6A2RVI)
		if ((_1D4Y4UKA7RVI == 0) or ((_1UKA4KAR6V5ITALI != -1) and (_1UKA4KAR6V5ITALI != _1UKA4KAR2VIT1A)))
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "GUARD_IDLE_DAY", -1)
		end if
		if ((_1UKA4KARVI5TCALI > 0) and (_1UKA4KAR6V5ITALI != _1UKA4KAR2VIT1A))
			_1ARVIT4R6V6I = 0
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "GUARD_ITERATOR", _1UKA4KARVI5TCALI - 1)

			_1ARVIT4R6VITFALI = _1DDY3UKA3RVI("GUARD_BALANCE_LIMIT")
			if ((_1ARVIT4R6VITFALI > 0) and (_1DCYUKAR9VITALAI(_1ARVITAR3VIT4ALI) >= _1ARVIT4R6VITFALI))
				_1ARVIT4R6V6I = 1
				_1UKA4KAR6V5ITALI = _1UKA4KAR2VIT1A
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "GUARD_IDLE_DAY", _1UKA4KAR2VIT1A)
			end if

			if ((_1ARVIT4R6V6I != 0) and (_1ARVITAR3VIT4ALI < 0))
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

				_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "B", _1UKA4K4ARVIT6A, _1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, 60, "guard")
			end if

			if ((_1ARVIT4R6V6I != 0) and (_1ARVITAR3VIT4ALI > 0))
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

				_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "S", _1UKA4K4ARVIT6A, -_1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, 60, "guard")
			end if
		end if
		if (_1UKA4KAR6V5ITALI == _1UKA4KAR2VIT1A)
			_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Превышение баланса")
			_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
			return
		end if

		'
        '   Сохраняем данные индикаторов в 'глобальное' состояние.
        '
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G1_DELTA", _1D9YUKARFVIT9ALI)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G1_GREEN", _1D9YBUKA5RVITA)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G1_RED", _1UKA9K6ARV6I)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G2_DELTA", _1D9YUKAR3VIT6A)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G2_GREEN", _1UKA8KFA4R)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G2_RED", _1D8YAUKA3R)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G3_DELTA", _1D8Y8U1KARVI)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G3_GREEN", _1UKA8K4ARVIT3A)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G3_RED", _1D7YEUKACRVI)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G4_DELTA", _1D7YCUKAER)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G4_GREEN", _1D7Y8UKARV8I)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G4_RED", _1ARVIT7RVITA4L1IY)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G5_DELTA", _1UKA7K1ARVIT5A)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G5_GREEN", _1D6YUKDA1RVITA)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G5_RED", _1UKA6K8ARVITEALI)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G6_DELTA", _1UKA6KAR6VAI)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G6_GREEN", _1UKA6KAR1VITALEI)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G6_RED", _1UKA5KARDVITAL5IY)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G7_DELTA", _1D5YUKAARV7ITA)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G7_GREEN", _1D5YUKAR6VITBALI)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G7_RED", _1UKA5KARVI3T2ALI)

        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G8_DELTA", _1D5Y1UKA6R)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G8_GREEN", _1UKA4KARDVITAL6I)
        _1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "G8_RED", _1ARVIT4R8VITALBIY)

		'
		'	Автоматически закрываем заявки и останавливаем торги в соответствии с настройками.
		'
		_1ARVITAR4VITAL2IY = _1DDY3UKA3RVI("AUTO_CLOSE_SLIPPAGE")
		_1ARVITARVI3TBALI = _1UKADKAR2VEITALI("AUTO_CLOSE_STAMPS")

		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Information of Automation Close Parameters")
			_1DCY9UDKAR("Now Week Day: " & _1UKA4KAR2VIT1A)
			_1DCY9UDKAR("Auto Close Slippage: " & _1ARVITAR4VITAL2IY)
			_1DCY9UDKAR("Auto Close Stamps: " & _1ARVITARVI3TBALI)
		end if

		for _1UKA4K0ARVDI in _1ARVITARVI3TBALI
			if (len(_1UKA4K0ARVDI) != 6)
				if (_1UKAAKAR2VIT2ALI == 1)
					_1DCY9UDKAR("Stamp: " & _1UKA4K0ARVDI & " WARNING! Ignored incorrect stamp")
				end if

				continue
			end if

			_1ARVIT3RAVFI = substr(_1UKA4K0ARVDI, 0, 1) + 0
			_1D3YUKARBVIT2ALI = substr(_1UKA4K0ARVDI, 2, 4) + 0

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCYAUKA5R("Information of Automation Close Stamp")
				_1DCY9UDKAR("Balance Value: " & _1ARVITAR3VIT4ALI)
				_1DCY9UDKAR("Now Time As HHNN: " & _1UKA4KAR2VIT2A)
				_1DCY9UDKAR("Stamp: " & _1UKA4K0ARVDI)
				_1DCY9UDKAR("Trade Auto Close Time As HHNN: " & _1D3YUKARBVIT2ALI)
				_1DCY9UDKAR("Trade Auto Close Week Day: " & _1ARVIT3RAVFI)
			end if

			if (((_1ARVIT3RAVFI == 0) or (_1UKA4KAR2VIT1A == _1ARVIT3RAVFI)) and (_1UKA4KAR2VIT2A == _1D3YUKARBVIT2ALI))
				if (_1ARVITAR3VIT4ALI < 0)

					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

					_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "B", _1UKA4K4ARVIT6A, _1ARVITAR4VITAL2IY, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "autoClose")
				end if

				if (_1ARVITAR3VIT4ALI > 0)
					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
					_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

					_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "S", _1UKA4K4ARVIT6A, -_1ARVITAR4VITAL2IY, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "autoClose")
				end if

				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCYAUKA5R("Information of Automation Close Operation")
					_1DCY9UDKAR("Class Code: " & _1UKAAK2ARVBITA)
					_1DCY9UDKAR("G1 Green String: " & _1UKA9KBARVITFA)
					_1DCY9UDKAR("G1 Red String: " & _1UKA9KAR6VEITA)
					_1DCY9UDKAR("Balance Value: " & _1ARVITAR3VIT4ALI)
					_1DCY9UDKAR("Security Code: " & _1ARVIT4RVI1TAL0I)
				end if

				_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", "Закрываю активы")
				_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)
				return
			end if
		end for

		'
		'	Анализируем полученные данные, формируем сигналы и торгуем.
		'
		_1D3Y8U4K = _1DDY3UKA3RVI("TRADE_SLIPPAGE")

		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Information of Trade")
			_1DCY9UDKAR("Class Code: " & _1UKAAK2ARVBITA)
			_1DCY9UDKAR("Security Code: " & _1ARVIT4RVI1TAL0I)
			_1DCY9UDKAR("Init Signal: " & _1ARVIT4RVITA5LIY0)
			_1DCY9UDKAR("Next Lot Quantity: " & _1UKA4KAR3VITALEIY)
			_1DCY9UDKAR("Trade Lot Factor: " & _1D3YAUKA6RVITA)
			_1DCY9UDKAR("Trade Lot Limit: " & _1UKA3KARAV1ITALI)
			_1DCY9UDKAR("Trade Lot Quantity: " & _1UKA3K9ARVITEALI)
			_1DCY9UDKAR("Trade Slippage: " & _1D3Y8U4K)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("Balance Value: " & _1ARVITAR3VIT4ALI)
			if (_1UKA9KAAARVITA == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G1 Green Id: " & _1UKA9KARDVITAL6IY)
				_1DCY9UDKAR("G1 Red Id: " & _1D9YUKAR8VIT9ALIY)
				_1DCY9UDKAR("G1 Green Value: " & _1D9YBUKA5RVITA)
				_1DCY9UDKAR("G1 Red Value: " & _1UKA9K6ARV6I)
				_1DCY9UDKAR("G1 Delta: " & _1ARVITARVITA0LIYC)
				_1DCY9UDKAR("G1 Is Allow: " & _1D9YAUKARVDITALI)
				_1DCY9UDKAR("G1 Is Valid: " & _1D9YAUKARV1I)
				_1DCY9UDKAR("G1 Signal: " & _1ARVIT9R6V5I)
			end if
			if (_1D8YUKEA5RVI == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G2 GreenId: " & _1UKA9K1ABRVI)
				_1DCY9UDKAR("G2 Red Id: " & _1D8YCUKARV4I)
				_1DCY9UDKAR("G2 Green Value: " & _1UKA8KFA4R)
				_1DCY9UDKAR("G2 Red Value: " & _1D8YAUKA3R)
				_1DCY9UDKAR("G2 Delta: " & _1UKA9K4AFRVI)
				_1DCY9UDKAR("G2 Is Allow: " & _1UKA8KEA8R)
				_1DCY9UDKAR("G2 Is Valid: " & _1UKA8KARDVITEALI)
				_1DCY9UDKAR("G2 Signal: " & _1UKA8KARAVIT0A)
			end if
			if (_1D8Y3UKA0RVI == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G3 GreenId: " & _1UKA8KAR6VITALEIY)
				_1DCY9UDKAR("G3 Red Id: " & _1D8YUK1ARV5I)
				_1DCY9UDKAR("G3 Green Value: " & _1UKA8K4ARVIT3A)
				_1DCY9UDKAR("G3 Red Value: " & _1D7YEUKACRVI)
				_1DCY9UDKAR("G3 Delta: " & _1UKA8KAR8VITALEIY)
				_1DCY9UDKAR("G3 Is Allow: " & _1ARVIT8RVI3TAL9IY)
				_1DCY9UDKAR("G3 Is Valid: " & _1D8YUKAR2VITDALI)
				_1DCY9UDKAR("G3 Signal: " & _1UKA7KARVIETAL7I)
			end if
			if (_1UKA7K7ARVDITA == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G4 GreenId: " & _1UKA7KBA3R)
				_1DCY9UDKAR("G4 Red Id: " & _1UKA7KAR6V6ITALI)
				_1DCY9UDKAR("G4 Green Value: " & _1D7Y8UKARV8I)
				_1DCY9UDKAR("G4 Red Value: " & _1ARVIT7RVITA4L1IY)
				_1DCY9UDKAR("G4 Delta: " & _1UKA7KARDVIT5A)
				_1DCY9UDKAR("G4 Is Allow: " & _1D7Y8U4KARVI)
				_1DCY9UDKAR("G4 Is Valid: " & _1UKA7KAR7VITAL8I)
				_1DCY9UDKAR("G4 Signal: " & _1D7YUKAR3V8I)
			end if
			if (_1D6YUKARCV0ITALI == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G5 GreenId: " & _1D6YUKFACRVITA)
				_1DCY9UDKAR("G5 Red Id: " & _1D6YAUKARV5I)
				_1DCY9UDKAR("G5 Green Value: " & _1D6YUKDA1RVITA)
				_1DCY9UDKAR("G5 Red Value: " & _1UKA6K8ARVITEALI)
				_1DCY9UDKAR("G5 Delta: " & _1ARVIT7R1VITCALI)
				_1DCY9UDKAR("G5 Is Allow: " & _1D6YCU5KAR)
				_1DCY9UDKAR("G5 Is Valid: " & _1ARVIT6RVIBTAL9I)
				_1DCY9UDKAR("G5 Signal: " & _1D6Y8UKABRVI)
			end if
			if (_1UKA6K1A1RVITA == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G6 GreenId: " & _1UKA6K4ARV5ITA)
				_1DCY9UDKAR("G6 Red Id: " & _1D5YUKARFV4I)
				_1DCY9UDKAR("G6 Green Value: " & _1UKA6KAR1VITALEI)
				_1DCY9UDKAR("G6 Red Value: " & _1UKA5KARDVITAL5IY)
				_1DCY9UDKAR("G6 Delta: " & _1D6YUK7ARVBI)
				_1DCY9UDKAR("G6 Is Allow: " & _1UKA6K1ARV8I)
				_1DCY9UDKAR("G6 Is Valid: " & _1D6YUK0ARVIT8ALIY)
				_1DCY9UDKAR("G6 Signal: " & _1D5YUKDA2R)
			end if
			if (_1D5Y5UKAER == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G7 GreenId: " & _1D5Y9UKARV2ITA)
				_1DCY9UDKAR("G7 Red Id: " & _1D5YUK4ABRVI)
				_1DCY9UDKAR("G7 Green Value: " & _1D5YUKAR6VITBALI)
				_1DCY9UDKAR("G7 Red Value: " & _1UKA5KARVI3T2ALI)
				_1DCY9UDKAR("G7 Delta: " & _1UKA5KBARVAI)
				_1DCY9UDKAR("G7 Is Allow: " & _1ARVIT5R6VITAL3IY)
				_1DCY9UDKAR("G7 Is Valid: " & _1D5YUK5ABRVITA)
				_1DCY9UDKAR("G7 Signal: " & _1D5Y2UFKAR)
			end if

			if (_1UKA4KCARV7ITA == 0)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("G8 GreenId: " & _1D4YFUKA9R)
				_1DCY9UDKAR("G8 Red Id: " & _1UKA4KARVIBTALIY0)
				_1DCY9UDKAR("G8 Green Value: " & _1UKA4KARDVITAL6I)
				_1DCY9UDKAR("G8 Red Value: " & _1ARVIT4R8VITALBIY)
				_1DCY9UDKAR("G8 Delta: " & _1D5YUK2A1R)
				_1DCY9UDKAR("G8 Is Allow: " & _1D4YUKCARVEITALI)
				_1DCY9UDKAR("G8 Is Valid: " & _1UKA4KARVICTAL6IY)
				_1DCY9UDKAR("G8 Signal: " & _1UKA4KAR8V8ITA)
			end if
		end if

		_1UKA4KAR0V6ITA = "Вычисляю операцию"
		if (_1D3YAUKA6RVITA == 0)
			_1UKA4KAR0V6ITA = _1ARVITCRFVITAALIY(_1ARVIT9R6V5I, "B", "Буду покупать", _1UKA4KAR0V6ITA)
			_1UKA4KAR0V6ITA = _1ARVITCRFVITAALIY(_1ARVIT9R6V5I, "S", "Буду продавать", _1UKA4KAR0V6ITA)
			_1UKA4KAR0V6ITA = _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, "Буду покупать", _1UKA4KAR0V6ITA)
			_1UKA4KAR0V6ITA = _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, "Буду продавать", _1UKA4KAR0V6ITA)
		else
			_1UKA4KAR0V6ITA = "Ожидаю сигнал"
		end if

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", _1UKA4KAR0V6ITA)
		_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)

		_1UKA3K8ARVBITALI = "?"

		_1UKAAK1ARV6I = _1DCYUKARCVDITA(_1D3YAUKA6RVITA, 0)
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, 0, 1))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT9R5VCITALI, 0, _1D9YAUKARVDITALI, _1UKACKARCVEI(_1ARVIT9R6V5I, "*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D8YUK9ADR, 0, _1UKA8KEA8R, _1UKACKARCVEI(_1UKA8KARAVIT0A, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D7YEU6K, 0, _1ARVIT8RVI3TAL9IY, _1UKACKARCVEI(_1UKA7KARVIETAL7I, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT7RVITA3L3I, 0, _1D7Y8U4KARVI, _1UKACKARCVEI(_1D7YUKAR3V8I, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1UKA6K8A6RVI, 0, _1D6YCU5KAR, _1UKACKARCVEI(_1D6Y8UKABRVI, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT5RCVITALBI, 0, _1UKA6K1ARV8I, _1UKACKARCVEI(_1D5YUKDA2R, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D5YUK2AER, 0, _1ARVIT5R6VITAL3IY, _1UKACKARCVEI(_1D5Y2UFKAR, "-*B")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D4Y7UFK, 0, _1D4YUKCARVEITALI, _1UKACKARCVEI(_1UKA4KAR8V8ITA, "-*B")))
		_1UKA3K8ARVBITALI = _1ARVITCRFVITAALIY(_1UKAAK1ARV6I, 1, "B", _1UKA3K8ARVBITALI)

		_1UKAAK1ARV6I = _1DCYUKARCVDITA(_1D3YAUKA6RVITA, 0)
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, 0, 1))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT9R5VCITALI, 0, _1D9YAUKARVDITALI, _1UKACKARCVEI(_1ARVIT9R6V5I, "*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D8YUK9ADR, 0, _1UKA8KEA8R, _1UKACKARCVEI(_1UKA8KARAVIT0A, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D7YEU6K, 0, _1ARVIT8RVI3TAL9IY, _1UKACKARCVEI(_1UKA7KARVIETAL7I, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT7RVITA3L3I, 0, _1D7Y8U4KARVI, _1UKACKARCVEI(_1D7YUKAR3V8I, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1UKA6K8A6RVI, 0, _1D6YCU5KAR, _1UKACKARCVEI(_1D6Y8UKABRVI, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1ARVIT5RCVITALBI, 0, _1UKA6K1ARV8I, _1UKACKARCVEI(_1D5YUKDA2R, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D5YUK2AER, 0, _1ARVIT5R6VITAL3IY, _1UKACKARCVEI(_1D5Y2UFKAR, "-*S")))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1ARVITCRFVITAALIY(_1D4Y7UFK, 0, _1D4YUKCARVEITALI, _1UKACKARCVEI(_1UKA4KAR8V8ITA, "-*S")))
		_1UKA3K8ARVBITALI = _1ARVITCRFVITAALIY(_1UKAAK1ARV6I, 1, "S", _1UKA3K8ARVBITALI)

		_1UKA3KARDVIT5A = get_value(_1UKA3K6A2RVI, "STOP_OPERATION") & ""
		_1D3YUKBACR = _1UKADKAR2VEITALI("STOP_SIGNALS")
		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("Stop Signals: " & _1D3YUKBACR)
			_1DCY9UDKAR("Stop Operation: " & _1UKA3KARDVIT5A)
			_1DCY9UDKAR("Tade Operation: " & _1UKA3K8ARVBITALI)
		end if

		_1UKAAK1ARV6I = 0
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(1, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1ARVIT9R6V5I, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(2, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1UKA8KARAVIT0A, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(3, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1UKA7KARVIETAL7I, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(4, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1D7YUKAR3V8I, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(5, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1D6Y8UKABRVI, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(6, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1D5YUKDA2R, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(7, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1D5Y2UFKAR, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1ARVITCRFVITAL3IY(8, _1D3YUKBACR, _1UKACK8A3RVI(_1UKACKARCVEI(_1UKA4KAR8V8ITA, "*BS"), _1UKAAK1ARV6I), _1UKAAK1ARV6I)
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKACKARCVEI(_1UKA3KARDVIT5A, "BS"), _1UKAAK1ARV6I)

		if (_1UKAAK1ARV6I == 1)
			if (_1UKACKARCVEI(_1UKA3K8ARVBITALI, "?" & _1UKA3KARDVIT5A) == 0)
				_1UKA3K8ARVBITALI = "?"

				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("Reset Trade Operation")
				end if
			else
				_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_OPERATION", "")

				if (_1UKAAKAR2VIT2ALI == 1)
					_1UKACKAARVIT2ALIY()
					_1DCY9UDKAR("Reset Stop Operation")
				end if
			end if
		end if

		_1DAY4U7KAR = 1

		_1ARVITAR4V8I = 1
		if ((_1D3YUKAR9V4ITALI == 1) and (_1UKACKARCVEI(_1UKA3K8ARVBITALI, "BS") == 1) and ((_1ARVIT4RVITA5LIY0 == "") or (_1ARVIT4RVITA5LIY0 == _1UKA3K8ARVBITALI)))
			_1ARVITAR4V8I = 0
			_1ARVIT4RVITA5LIY0 = _1UKA3K8ARVBITALI
			_1UKA4KAR0V6ITA = "Игнорирую сигнал"
		end if
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STATE", _1UKA4KAR0V6ITA)

		_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)

		if ((_1ARVITAR4V8I == 1) and (_1UKA3K8ARVBITALI == "B") and (_1UKACKARCVEI("B", _1D3YUKAR8V8ITA) == 1) and (_1DCYUKCA1R(_1ARVIT4R2VITAL7IY) == 1))
			_1DAY4U7KAR = 0
			_1ARVIT4RVITA5LIY0 = "-"
			_1UKA4KAR3VITALEIY = _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, _1UKA4KAR3VITALEIY, _1DCYUKAR9VITALAI(_1ARVITAR3VIT4ALI) + _1UKA3K9ARVITEALI)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, _1UKA4K3A5R * _1D3YAUKA6RVITA, _1UKA3K9ARVITEALI))

			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "B", _1UKA4K4ARVIT6A, _1D3Y8U4K, _1UKA4KAR3VITALEIY, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "signalIn")
		end if

		if ((_1ARVITAR4V8I == 1) and (_1UKA3K8ARVBITALI == "S") and (_1UKACKARCVEI("S", _1D3YUKAR8V8ITA) == 1) and (_1DCYUKCA1R(_1ARVIT4R2VITAL7IY) == 1))
			_1DAY4U7KAR = 0
			_1ARVIT4RVITA5LIY0 = "-"
			_1UKA4KAR3VITALEIY = _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, _1UKA4KAR3VITALEIY, _1DCYUKAR9VITALAI(_1ARVITAR3VIT4ALI) + _1UKA3K9ARVITEALI)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, _1UKA4K3A5R * _1D3YAUKA6RVITA, _1UKA3K9ARVITEALI))

			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "S", _1UKA4K4ARVIT6A, -_1D3Y8U4K, _1UKA4KAR3VITALEIY, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "signalIn")
		end if

		'
		'	Закрываем активы при первых признаках 'разворота'.
		'
		_1UKA4KARVI1TAL8IY = "?"

		_1UKAAK1ARV6I = 0
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA9KARVIFTAL6IY, _1DCYUKARCVDITA(_1D9YBUKA5RVITA, _1UKA9K6ARV6I)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA9K2ADRVI, _1DCYUKARCVDITA(_1UKA8KFA4R, _1D8YAUKA3R)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D8YUK7ACRVI, _1DCYUKARCVDITA(_1UKA8K4ARVIT3A, _1D7YEUKACRVI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D7YUKCABRVI, _1DCYUKARCVDITA(_1D7Y8UKARV8I, _1ARVIT7RVITA4L1IY)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D7Y1UKA4R, _1DCYUKARCVDITA(_1D6YUKDA1RVITA, _1UKA6K8ARVITEALI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA6K6ARVIT5ALI, _1DCYUKARCVDITA(_1UKA6KAR1VITALEI, _1UKA5KARDVITAL5IY)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D5YUKARAV0I, _1DCYUKARCVDITA(_1D5YUKAR6VITBALI, _1UKA5KARVI3T2ALI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1ARVIT5R0VITFA, _1DCYUKARCVDITA(_1UKA4KARDVITAL6I, _1ARVIT4R8VITALBIY)))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1DAY4U7KAR)
		_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1UKACKARCVITALFIY(_1ARVITAR3VIT4ALI, 0)), 1, "B", _1UKA4KARVI1TAL8IY)

		_1UKAAK1ARV6I = 0
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA9KARVIFTAL6IY, _1UKACKARCVITALFIY(_1D9YBUKA5RVITA, _1UKA9K6ARV6I)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA9K2ADRVI, _1UKACKARCVITALFIY(_1UKA8KFA4R, _1D8YAUKA3R)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D8YUK7ACRVI, _1UKACKARCVITALFIY(_1UKA8K4ARVIT3A, _1D7YEUKACRVI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D7YUKCABRVI, _1UKACKARCVITALFIY(_1D7Y8UKARV8I, _1ARVIT7RVITA4L1IY)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D7Y1UKA4R, _1UKACKARCVITALFIY(_1D6YUKDA1RVITA, _1UKA6K8ARVITEALI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1UKA6K6ARVIT5ALI, _1UKACKARCVITALFIY(_1UKA6KAR1VITALEI, _1UKA5KARDVITAL5IY)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1D5YUKARAV0I, _1UKACKARCVITALFIY(_1D5YUKAR6VITBALI, _1UKA5KARVI3T2ALI)))
		_1UKAAK1ARV6I = _1UKACK8A3RVI(_1UKAAK1ARV6I, _1DCY9UKARV9ITALI(_1ARVIT5R0VITFA, _1UKACKARCVITALFIY(_1UKA4KARDVITAL6I, _1ARVIT4R8VITALBIY)))
		_1UKAAK1ARV6I = _1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1DAY4U7KAR)
		_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKAAK1ARV6I, _1DCYUKARCVDITA(_1ARVITAR3VIT4ALI, 0)), 1, "S", _1UKA4KARVI1TAL8IY)

		if ((_1UKA4KARVI1TAL8IY == "B") and (_1UKACKARCVEI("B", _1D3YUKAR8V8ITA) == 1))
			_1DAY4U7KAR = 0
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "B", _1UKA4K4ARVIT6A, _1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "signalOut")
		end if
		if ((_1UKA4KARVI1TAL8IY == "S") and (_1UKACKARCVEI("S", _1D3YUKAR8V8ITA) == 1))
			_1DAY4U7KAR = 0
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "S", _1UKA4K4ARVIT6A, -_1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "signalOut")
		end if

		'
		'	Обрабатываем параметры 'стопов'.
		'
		_1UKA4KARVI1TAL8IY = "?"
		_1D3YUKARDVITCALIY = _1UKADKAR2VEITALI("STOP_LOSS_MODE")
		_1UKA3KDA7R = _1DDY3UKA3RVI("STOP_LOSS_OFFSET")
		_1ARVIT3RCVITAL7I = _1UKADKAR2VEITALI("STOP_PROFIT_MODE")
		_1UKA3KARCV4I = _1DDY3UKA3RVI("STOP_PROFIT_OFFSET")

		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCYAUKA5R("Information of Virtual Stops")
			_1DCY9UDKAR("Stop Loss Mode: " & _1D3YUKARDVITCALIY)
			_1DCY9UDKAR("Stop Loss Offset: " & _1UKA3KDA7R)
			_1DCY9UDKAR("Stop Profit Mode: " & _1ARVIT3RCVITAL7I)
			_1DCY9UDKAR("Stop Profit Offset: " & _1UKA3KARCV4I)
		end if

		_1UKA3KDA7R = _1ARVITCRFVITAALIY(_1UKACKARCV6I(_1UKA3KDA7R), 1, _1UKA3KDA7R, _1UKADKARVI0TFALIY(_1UKA3KDA7R, _1UKA3K6A2RVI))
		_1UKA3KARCV4I = _1ARVITCRFVITAALIY(_1UKACKARCV6I(_1UKA3KARCV4I), 1, _1UKA3KARCV4I, _1UKADKARVI0TFALIY(_1UKA3KARCV4I, _1UKA3K6A2RVI))

		if (_1UKAAKAR2VIT2ALI == 1)
			_1UKACKAARVIT2ALIY()
			_1DCY9UDKAR("Stop Loss Offset: " & _1UKA3KDA7R)
			_1DCY9UDKAR("Stop Profit Offset: " & _1UKA3KARCV4I)
		end if

		_1UKA3KAREV3ITALI = _1UKADKARVI0TFALIY("STOP_LOSS", _1UKA3K6A2RVI)
		if ((_1ARVITAR3VIT4ALI != 0) and (_1UKA3KAREV3ITALI != 0))
			_1D3YUKFA2RVI = _1UKADKAR2VEITALI("STOP_LOSS_FIELD")
			_1UKA3KARFVIT1ALIY = _1UKADKAR2VEITALI("STOP_LOSS_ID")
			_1D3YUKEAAR = _1DDY3UKA3RVI("STOP_LOSS_LINE")
			_1ARVIT3RVIBT5ALI = _1ARVITDRVI4TAL6IY(_1UKA3KARFVIT1ALIY, 0, _1D3YUKEAAR, _1D3YUKFA2RVI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("Stop Loss Id: " & _1UKA3KARFVIT1ALIY)
				_1DCY9UDKAR("Stop Loss Line: " & _1D3YUKEAAR)
				_1DCY9UDKAR("Stop Loss Field: " & _1D3YUKFA2RVI)
				_1DCY9UDKAR("Stop Loss Limit: " & _1UKA3KAREV3ITALI)
				_1DCY9UDKAR("Stop Loss Value: " & _1ARVIT3RVIBT5ALI)
			end if

			_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKACKARCVITALFIY(_1ARVITAR3VIT4ALI, 0), _1DCYUKARCVDITA(_1ARVIT3RVIBT5ALI, _1UKA3KAREV3ITALI)), 1, "B", _1UKA4KARVI1TAL8IY)
			_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1DCYUKARCVDITA(_1ARVITAR3VIT4ALI, 0), _1UKACKARCVITALFIY(_1ARVIT3RVIBT5ALI, _1UKA3KAREV3ITALI)), 1, "S", _1UKA4KARVI1TAL8IY)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_OPERATION", _1UKA4KARVI1TAL8IY)
		end if

		_1UKA3KARVIDT0ALI = _1UKADKARVI0TFALIY("STOP_PROFIT", _1UKA3K6A2RVI)
		if ((_1ARVITAR3VIT4ALI != 0) and (_1UKA3KARVIDT0ALI != 0))
			_1D3YUKFA2RVI = _1UKADKAR2VEITALI("STOP_PROFIT_FIELD")
			_1UKA3KARFVIT1ALIY = _1UKADKAR2VEITALI("STOP_PROFIT_ID")
			_1D3YUKEAAR = _1DDY3UKA3RVI("STOP_PROFIT_LINE")
			_1ARVIT3RVIBT5ALI = _1ARVITDRVI4TAL6IY(_1UKA3KARFVIT1ALIY, 0, _1D3YUKEAAR, _1D3YUKFA2RVI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("Stop Profit Id: " & _1UKA3KARFVIT1ALIY)
				_1DCY9UDKAR("Stop Profit Line: " & _1D3YUKEAAR)
				_1DCY9UDKAR("Stop Profit Field: " & _1D3YUKFA2RVI)
				_1DCY9UDKAR("Stop Profit Limit: " & _1UKA3KARVIDT0ALI)
				_1DCY9UDKAR("Stop Profit Value: " & _1ARVIT3RVIBT5ALI)
			end if

			_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1UKACKARCVITALFIY(_1ARVITAR3VIT4ALI, 0), _1UKACKARCVITALFIY(_1ARVIT3RVIBT5ALI, _1UKA3KARVIDT0ALI)), 1, "B", _1UKA4KARVI1TAL8IY)
			_1UKA4KARVI1TAL8IY = _1ARVITCRFVITAALIY(_1DCY9UKARV9ITALI(_1DCYUKARCVDITA(_1ARVITAR3VIT4ALI, 0), _1DCYUKARCVDITA(_1ARVIT3RVIBT5ALI, _1UKA3KARVIDT0ALI)), 1, "S", _1UKA4KARVI1TAL8IY)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_OPERATION", _1UKA4KARVI1TAL8IY)
		end if

		if ((_1ARVITAR3VIT4ALI != 0) and (_1UKA4KARVI1TAL8IY == "?") and (_1UKA3KDA7R != 0))
			_1UKA3KARVIFTAL7IY = _1DDY3UKA3RVI("STOP_LOSS_CANDLE")
			_1D3YUKFA2RVI = _1UKADKAR2VEITALI("STOP_LOSS_FIELD")
			_1UKA3KARFVIT1ALIY = _1UKADKAR2VEITALI("STOP_LOSS_ID")
			_1D3YUKEAAR = _1DDY3UKA3RVI("STOP_LOSS_LINE")
			_1ARVIT4RVITA0L3I = _1ARVITDRVI4TAL6IY(_1UKA3KARFVIT1ALIY, _1UKA3KARVIFTAL7IY, _1D3YUKEAAR, _1D3YUKFA2RVI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("Stop Loss Base: " & _1ARVIT4RVITA0L3I)
			end if

			_1ARVIT3RVITAFLCI = 0
			_1ARVIT3RVITAFLCI = _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, _1DCY8UKACRVITA(_1ARVIT4RVITA0L3I + _1UKA3KDA7R, _1ARVITCRFVITAALIY(_1UKA3KAREV3ITALI, 0, _1ARVIT4RVITA0L3I + _1UKA3KDA7R, _1UKA3KAREV3ITALI)), _1ARVIT3RVITAFLCI)
			_1ARVIT3RVITAFLCI = _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, _1UKACKAR9VIT3A(_1ARVIT4RVITA0L3I - _1UKA3KDA7R, _1ARVITCRFVITAALIY(_1UKA3KAREV3ITALI, 0, _1ARVIT4RVITA0L3I - _1UKA3KDA7R, _1UKA3KAREV3ITALI)), _1ARVIT3RVITAFLCI)

			_1ARVIT3RVIBT5ALI = 0
			_1ARVIT3RVIBT5ALI = _1ARVITCRFVITAALIY(_1D3YUKARDVITCALIY, "FIXED", _1UKACKEARVCITA(_1UKA3KAREV3ITALI, 0, _1UKA3KAREV3ITALI, _1ARVIT3RVITAFLCI), _1ARVIT3RVIBT5ALI)
			_1ARVIT3RVIBT5ALI = _1ARVITCRFVITAALIY(_1D3YUKARDVITCALIY, "FLOAT", _1ARVIT3RVITAFLCI, _1ARVIT3RVIBT5ALI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1DCY9UDKAR("Stop Loss Limit: " & _1ARVIT3RVIBT5ALI)
			end if

			_1UKA3KAREV3ITALI = _1ARVIT3RVIBT5ALI
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", _1ARVIT3RVIBT5ALI)
		end if

		if ((_1ARVITAR3VIT4ALI != 0) and (_1UKA4KARVI1TAL8IY == "?") and (_1UKA3KARCV4I != 0))
			_1UKA3KARVIFTAL7IY = _1DDY3UKA3RVI("STOP_PROFIT_CANDLE")
			_1D3YUKFA2RVI = _1UKADKAR2VEITALI("STOP_PROFIT_FIELD")
			_1UKA3KARFVIT1ALIY = _1UKADKAR2VEITALI("STOP_PROFIT_ID")
			_1D3YUKEAAR = _1DDY3UKA3RVI("STOP_PROFIT_LINE")
			_1ARVIT4RVITA0L3I = _1ARVITDRVI4TAL6IY(_1UKA3KARFVIT1ALIY, _1UKA3KARVIFTAL7IY, _1D3YUKEAAR, _1D3YUKFA2RVI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("Stop Profit Base: " & _1ARVIT4RVITA0L3I)
			end if

			_1ARVIT3RVITAFLCI = 0
			_1ARVIT3RVITAFLCI = _1DCYFUKA2RVI(_1ARVITAR3VIT4ALI, 0, _1UKACKAR9VIT3A(_1ARVIT4RVITA0L3I - _1UKA3KARCV4I, _1ARVITCRFVITAALIY(_1UKA3KARVIDT0ALI, 0, _1ARVIT4RVITA0L3I - _1UKA3KARCV4I, _1UKA3KARVIDT0ALI)), _1ARVIT3RVITAFLCI)
			_1ARVIT3RVITAFLCI = _1UKACKEARVCITA(_1ARVITAR3VIT4ALI, 0, _1DCY8UKACRVITA(_1ARVIT4RVITA0L3I + _1UKA3KARCV4I, _1ARVITCRFVITAALIY(_1UKA3KARVIDT0ALI, 0, _1ARVIT4RVITA0L3I + _1UKA3KARCV4I, _1UKA3KARVIDT0ALI)), _1ARVIT3RVITAFLCI)

			_1ARVIT3RVIBT5ALI = 0
			_1ARVIT3RVIBT5ALI = _1ARVITCRFVITAALIY(_1ARVIT3RCVITAL7I, "FIXED", _1UKACKEARVCITA(_1UKA3KARVIDT0ALI, 0, _1UKA3KARVIDT0ALI, _1ARVIT3RVITAFLCI), _1ARVIT3RVIBT5ALI)
			_1ARVIT3RVIBT5ALI = _1ARVITCRFVITAALIY(_1ARVIT3RCVITAL7I, "FLOAT", _1ARVIT3RVITAFLCI, _1ARVIT3RVIBT5ALI)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1DCY9UDKAR("Stop Profit Limit: " & _1ARVIT3RVIBT5ALI)
			end if

			_1UKA3KARVIDT0ALI = _1ARVIT3RVIBT5ALI
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", _1ARVIT3RVIBT5ALI)
		end if

		if (_1DAY4U7KAR == 0)
			_1UKA4KARVI1TAL8IY = "?"
			_1UKA3KAREV3ITALI = 0
			_1UKA3KARVIDT0ALI = 0
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			if (_1UKAAKAR2VIT2ALI == 1)
				_1UKACKAARVIT2ALIY()
				_1DCY9UDKAR("Ignore Transaction Sending")
			end if
		end if

		_1UKA3KDARV6ITA = _1UKACKEA3RVI(_1UKA3KDA7R, _1UKA3KAREV3ITALI & " / " & _1UKA3KDA7R, "")
		_1ARVIT3RVIBTALDIY = _1UKACKEA3RVI(_1UKA3KARCV4I, _1UKA3KARVIDT0ALI & " / " & _1UKA3KARCV4I, "")

		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STOP_LOSS", _1UKA3KDARV6ITA)
		_1UKA4KAR5V5ITALI = set_value(_1UKA4KAR5V5ITALI, "STOP_PROFIT", _1ARVIT3RVIBTALDIY)
		_1DCYUKAR5VBITA(_1UKA4KAR5V5ITALI)

		if ((_1UKA4KARVI1TAL8IY == "B") and (_1UKACKARCVEI("B", _1D3YUKAR8V8ITA) == 1))
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "B", _1UKA4K4ARVIT6A, _1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "stop")
		end if
		if ((_1UKA4KARVI1TAL8IY == "S") and (_1UKACKARCVEI("S", _1D3YUKAR8V8ITA) == 1))
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "NEXT_LOT_VALUE", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_LOSS", 0)
			_1UKA3K6A2RVI = set_value(_1UKA3K6A2RVI, "STOP_PROFIT", 0)

			_1DCYUK6ARV2I(_1UKAAK5ARV1ITA, _1ARVITARVI1TAL9IY, "S", _1UKA4K4ARVIT6A, -_1D3Y8U4K, _1ARVITAR3VIT4ALI, _1UKAAK2ARVBITA, _1ARVIT4RVI1TAL0I, _1UKA4K4ARV3ITA, _1D3YUK9ARVIT7ALI, _1UKA3K6ARVIT5ALIY, "stop")
		end if
	END_PROGRAM

	PARAMETER parameter;
	PARAMETER_TITLE Параметр;
	PARAMETER_DESCRIPTION Название параметра;
	PARAMETER_TYPE STRING(24);
	END

	PARAMETER value;
	PARAMETER_TITLE Значение;
	PARAMETER_DESCRIPTION Значение параметра;
	PARAMETER_TYPE STRING(64);
	END

	PARAMETER description;
	PARAMETER_TITLE Описание;
	PARAMETER_DESCRIPTION Описание параметра;
	PARAMETER_TYPE STRING(64);
	END

END_PORTFOLIO_EX
